
<!-- saved from url=(0029)https://live.paj.com.my/KL003 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="color-scheme" content="light dark"></head><body><div class="line-gutter-backdrop"></div><form autocomplete="off"><label class="line-wrap-control">Line wrap<input type="checkbox" aria-label="Line wrap"></label></form><table><tbody><tr><td class="line-number" value="1"></td><td class="line-content"><span class="html-doctype">&lt;!DOCTYPE html&gt;</span></td></tr><tr><td class="line-number" value="2"></td><td class="line-content"><span class="html-tag">&lt;html <span class="html-attribute-name">lang</span>="<span class="html-attribute-value">en</span>"&gt;</span></td></tr><tr><td class="line-number" value="3"></td><td class="line-content"><span class="html-tag">&lt;head&gt;</span></td></tr><tr><td class="line-number" value="4"></td><td class="line-content">    <span class="html-tag">&lt;title&gt;</span>Jejak Kedudukan Bas Muafakat Johor<span class="html-tag">&lt;/title&gt;</span></td></tr><tr><td class="line-number" value="5"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">charset</span>="<span class="html-attribute-value">UTF-8</span>"&gt;</span></td></tr><tr><td class="line-number" value="6"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">name</span>="<span class="html-attribute-value">viewport</span>" <span class="html-attribute-name">content</span>="<span class="html-attribute-value">width=device-width, initial-scale=1.0</span>"&gt;</span></td></tr><tr><td class="line-number" value="7"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">name</span>="<span class="html-attribute-value">description</span>" <span class="html-attribute-name">content</span>="<span class="html-attribute-value">Jejak Kedudukan Bas Muafakat Johor</span>"/&gt;</span></td></tr><tr><td class="line-number" value="8"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">shortcut icon</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://live.paj.com.my/assets/logo-paj.png" rel="noreferrer noopener">/assets/logo-paj.png</a>"/&gt;</span></td></tr><tr><td class="line-number" value="9"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.css" rel="noreferrer noopener">https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.css</a>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>"&gt;</span></td></tr><tr><td class="line-number" value="10"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://live.paj.com.my/assets/plugins/global/plugins.bundle.css" rel="noreferrer noopener">/assets/plugins/global/plugins.bundle.css</a>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>" <span class="html-attribute-name">type</span>="<span class="html-attribute-value">text/css</span>"/&gt;</span></td></tr><tr><td class="line-number" value="11"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://live.paj.com.my/assets/css/style.bundle.css" rel="noreferrer noopener">/assets/css/style.bundle.css</a>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>" <span class="html-attribute-name">type</span>="<span class="html-attribute-value">text/css</span>"/&gt;</span></td></tr><tr><td class="line-number" value="12"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://site-assets.fontawesome.com/releases/v6.7.2/css/all.css" rel="noreferrer noopener">https://site-assets.fontawesome.com/releases/v6.7.2/css/all.css</a>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>"&gt;</span></td></tr><tr><td class="line-number" value="13"></td><td class="line-content">    <span class="html-tag">&lt;style&gt;</span></td></tr><tr><td class="line-number" value="14"></td><td class="line-content">        body {</td></tr><tr><td class="line-number" value="15"></td><td class="line-content">            margin: 0;</td></tr><tr><td class="line-number" value="16"></td><td class="line-content">            padding: 0;</td></tr><tr><td class="line-number" value="17"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="18"></td><td class="line-content">        #map {</td></tr><tr><td class="line-number" value="19"></td><td class="line-content">            position: absolute;</td></tr><tr><td class="line-number" value="20"></td><td class="line-content">            top: 0;</td></tr><tr><td class="line-number" value="21"></td><td class="line-content">            bottom: 0;</td></tr><tr><td class="line-number" value="22"></td><td class="line-content">            width: 100%;</td></tr><tr><td class="line-number" value="23"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="24"></td><td class="line-content">        .legend-card {</td></tr><tr><td class="line-number" value="25"></td><td class="line-content">            position: absolute;</td></tr><tr><td class="line-number" value="26"></td><td class="line-content">            top: 10px;</td></tr><tr><td class="line-number" value="27"></td><td class="line-content">            right: 10px;</td></tr><tr><td class="line-number" value="28"></td><td class="line-content">            background: white;</td></tr><tr><td class="line-number" value="29"></td><td class="line-content">            padding: 15px;</td></tr><tr><td class="line-number" value="30"></td><td class="line-content">            padding-top: 3px;</td></tr><tr><td class="line-number" value="31"></td><td class="line-content">            border-radius: 8px;</td></tr><tr><td class="line-number" value="32"></td><td class="line-content">            box-shadow: 0 2px 4px rgba(0,0,0,0.1);</td></tr><tr><td class="line-number" value="33"></td><td class="line-content">            z-index: 1;</td></tr><tr><td class="line-number" value="34"></td><td class="line-content">            max-width: 200px;</td></tr><tr><td class="line-number" value="35"></td><td class="line-content">            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;</td></tr><tr><td class="line-number" value="36"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="37"></td><td class="line-content">        .legend-title {</td></tr><tr><td class="line-number" value="38"></td><td class="line-content">            font-weight: 600;</td></tr><tr><td class="line-number" value="39"></td><td class="line-content">            font-size: 14px;</td></tr><tr><td class="line-number" value="40"></td><td class="line-content">            margin: 0 0 10px 0;</td></tr><tr><td class="line-number" value="41"></td><td class="line-content">            color: #333;</td></tr><tr><td class="line-number" value="42"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="43"></td><td class="line-content">        .legend-item {</td></tr><tr><td class="line-number" value="44"></td><td class="line-content">            display: flex;</td></tr><tr><td class="line-number" value="45"></td><td class="line-content">            align-items: center;</td></tr><tr><td class="line-number" value="46"></td><td class="line-content">            margin-bottom: 8px;</td></tr><tr><td class="line-number" value="47"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="48"></td><td class="line-content">        .legend-item:last-child {</td></tr><tr><td class="line-number" value="49"></td><td class="line-content">            margin-bottom: 0;</td></tr><tr><td class="line-number" value="50"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="51"></td><td class="line-content">        .legend-icon {</td></tr><tr><td class="line-number" value="52"></td><td class="line-content">            width: 20px;</td></tr><tr><td class="line-number" value="53"></td><td class="line-content">            height: 20px;</td></tr><tr><td class="line-number" value="54"></td><td class="line-content">            margin-right: 8px;</td></tr><tr><td class="line-number" value="55"></td><td class="line-content">            background-size: contain;</td></tr><tr><td class="line-number" value="56"></td><td class="line-content">            background-repeat: no-repeat;</td></tr><tr><td class="line-number" value="57"></td><td class="line-content">            background-position: center;</td></tr><tr><td class="line-number" value="58"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="59"></td><td class="line-content">        .legend-text {</td></tr><tr><td class="line-number" value="60"></td><td class="line-content">            font-size: 12px;</td></tr><tr><td class="line-number" value="61"></td><td class="line-content">            color: #666;</td></tr><tr><td class="line-number" value="62"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="63"></td><td class="line-content">        .legend-route {</td></tr><tr><td class="line-number" value="64"></td><td class="line-content">            background-color: #ff0000;</td></tr><tr><td class="line-number" value="65"></td><td class="line-content">            width: 20px;</td></tr><tr><td class="line-number" value="66"></td><td class="line-content">            height: 3px;</td></tr><tr><td class="line-number" value="67"></td><td class="line-content">            margin-right: 8px;</td></tr><tr><td class="line-number" value="68"></td><td class="line-content">            border-radius: 2px;</td></tr><tr><td class="line-number" value="69"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="70"></td><td class="line-content">        .mapboxgl-popup-content {</td></tr><tr><td class="line-number" value="71"></td><td class="line-content">            padding: 15px;</td></tr><tr><td class="line-number" value="72"></td><td class="line-content">            border-radius: 8px;</td></tr><tr><td class="line-number" value="73"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="74"></td><td class="line-content">        .bus-stop-name {</td></tr><tr><td class="line-number" value="75"></td><td class="line-content">            font-weight: bold;</td></tr><tr><td class="line-number" value="76"></td><td class="line-content">            margin: 0;</td></tr><tr><td class="line-number" value="77"></td><td class="line-content">            color: #333;</td></tr><tr><td class="line-number" value="78"></td><td class="line-content">            font-size: 14px;</td></tr><tr><td class="line-number" value="79"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="80"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="81"></td><td class="line-content">        /* New styles for the sliding cards */</td></tr><tr><td class="line-number" value="82"></td><td class="line-content">        .bus-cards-container {</td></tr><tr><td class="line-number" value="83"></td><td class="line-content">            position: fixed;</td></tr><tr><td class="line-number" value="84"></td><td class="line-content">            bottom: 30px;</td></tr><tr><td class="line-number" value="85"></td><td class="line-content">            left: 50%;</td></tr><tr><td class="line-number" value="86"></td><td class="line-content">            transform: translateX(-50%);</td></tr><tr><td class="line-number" value="87"></td><td class="line-content">            /*height: 50px;*/</td></tr><tr><td class="line-number" value="88"></td><td class="line-content">            background: transparent;</td></tr><tr><td class="line-number" value="89"></td><td class="line-content">            overflow-x: auto;</td></tr><tr><td class="line-number" value="90"></td><td class="line-content">            white-space: nowrap;</td></tr><tr><td class="line-number" value="91"></td><td class="line-content">            padding-top: 10px;</td></tr><tr><td class="line-number" value="92"></td><td class="line-content">            padding-bottom: 10px;</td></tr><tr><td class="line-number" value="93"></td><td class="line-content">            padding-left: 10px;</td></tr><tr><td class="line-number" value="94"></td><td class="line-content">            /*padding-bottom: 10px;*/</td></tr><tr><td class="line-number" value="95"></td><td class="line-content">            scrollbar-width: none; /* Firefox */</td></tr><tr><td class="line-number" value="96"></td><td class="line-content">            -ms-overflow-style: none; /* IE and Edge */</td></tr><tr><td class="line-number" value="97"></td><td class="line-content">            z-index: 1000;</td></tr><tr><td class="line-number" value="98"></td><td class="line-content">            width: 100%;</td></tr><tr><td class="line-number" value="99"></td><td class="line-content">            max-width: 1200px;</td></tr><tr><td class="line-number" value="100"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="101"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="102"></td><td class="line-content">        /*.bus-cards-container::-webkit-scrollbar {*/</td></tr><tr><td class="line-number" value="103"></td><td class="line-content">        /*    display: none; !* Chrome, Safari, Opera *!*/</td></tr><tr><td class="line-number" value="104"></td><td class="line-content">        /*}*/</td></tr><tr><td class="line-number" value="105"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="106"></td><td class="line-content">        .bus-card {</td></tr><tr><td class="line-number" value="107"></td><td class="line-content">            display: inline-block;</td></tr><tr><td class="line-number" value="108"></td><td class="line-content">            width: 160px;</td></tr><tr><td class="line-number" value="109"></td><td class="line-content">            height: 60px;</td></tr><tr><td class="line-number" value="110"></td><td class="line-content">            margin-right: 10px;</td></tr><tr><td class="line-number" value="111"></td><td class="line-content">            background: rgba(255, 255, 255, 0.9);</td></tr><tr><td class="line-number" value="112"></td><td class="line-content">            border-radius: 8px;</td></tr><tr><td class="line-number" value="113"></td><td class="line-content">            padding: 10px;</td></tr><tr><td class="line-number" value="114"></td><td class="line-content">            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);</td></tr><tr><td class="line-number" value="115"></td><td class="line-content">            vertical-align: top;</td></tr><tr><td class="line-number" value="116"></td><td class="line-content">            cursor: pointer;</td></tr><tr><td class="line-number" value="117"></td><td class="line-content">            transition: all 0.2s ease;</td></tr><tr><td class="line-number" value="118"></td><td class="line-content">            backdrop-filter: blur(5px);</td></tr><tr><td class="line-number" value="119"></td><td class="line-content">            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; /* Add this line */</td></tr><tr><td class="line-number" value="120"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="121"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="122"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="123"></td><td class="line-content">        .bus-card:hover {</td></tr><tr><td class="line-number" value="124"></td><td class="line-content">            transform: translateY(-2px);</td></tr><tr><td class="line-number" value="125"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="126"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="127"></td><td class="line-content">        .bus-card.active {</td></tr><tr><td class="line-number" value="128"></td><td class="line-content">            background: #e3f2fd;</td></tr><tr><td class="line-number" value="129"></td><td class="line-content">            border: 2px solid #2196f3;</td></tr><tr><td class="line-number" value="130"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="131"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="132"></td><td class="line-content">        .bus-id {</td></tr><tr><td class="line-number" value="133"></td><td class="line-content">            /*font-weight: bold;*/</td></tr><tr><td class="line-number" value="134"></td><td class="line-content">            /*font-size: 16px;*/</td></tr><tr><td class="line-number" value="135"></td><td class="line-content">            color: #434343;</td></tr><tr><td class="line-number" value="136"></td><td class="line-content">            margin: 0 0 5px 0;</td></tr><tr><td class="line-number" value="137"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="138"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="139"></td><td class="line-content">        .last-update {</td></tr><tr><td class="line-number" value="140"></td><td class="line-content">            font-size: 12px;</td></tr><tr><td class="line-number" value="141"></td><td class="line-content">            color: #666;</td></tr><tr><td class="line-number" value="142"></td><td class="line-content">            margin: 0;</td></tr><tr><td class="line-number" value="143"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="144"></td><td class="line-content">        .online {</td></tr><tr><td class="line-number" value="145"></td><td class="line-content">            /*background: #0fa354;*/</td></tr><tr><td class="line-number" value="146"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="147"></td><td class="line-content">        .offline {</td></tr><tr><td class="line-number" value="148"></td><td class="line-content">            background: #dadada;</td></tr><tr><td class="line-number" value="149"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="150"></td><td class="line-content">        /*.logo-container img {*/</td></tr><tr><td class="line-number" value="151"></td><td class="line-content">        /*    height: 40px;*/</td></tr><tr><td class="line-number" value="152"></td><td class="line-content">        /*    width: auto;*/</td></tr><tr><td class="line-number" value="153"></td><td class="line-content">        /*}*/</td></tr><tr><td class="line-number" value="154"></td><td class="line-content"> .back-btn{</td></tr><tr><td class="line-number" value="155"></td><td class="line-content">      display:inline-flex;</td></tr><tr><td class="line-number" value="156"></td><td class="line-content">      align-items:center;</td></tr><tr><td class="line-number" value="157"></td><td class="line-content">      gap:8px;</td></tr><tr><td class="line-number" value="158"></td><td class="line-content">      margin-top:10px;</td></tr><tr><td class="line-number" value="159"></td><td class="line-content">      padding:8px 12px;</td></tr><tr><td class="line-number" value="160"></td><td class="line-content">      border-radius:8px;</td></tr><tr><td class="line-number" value="161"></td><td class="line-content">      border:1px solid rgba(0,0,0,.08);</td></tr><tr><td class="line-number" value="162"></td><td class="line-content">      background:#f4f6f8;</td></tr><tr><td class="line-number" value="163"></td><td class="line-content">      font-size:12px;</td></tr><tr><td class="line-number" value="164"></td><td class="line-content">      font-weight:600;</td></tr><tr><td class="line-number" value="165"></td><td class="line-content">      color:#2b2e34;</td></tr><tr><td class="line-number" value="166"></td><td class="line-content">      text-decoration:none;</td></tr><tr><td class="line-number" value="167"></td><td class="line-content">      box-shadow:0 1px 2px rgba(0,0,0,.06);</td></tr><tr><td class="line-number" value="168"></td><td class="line-content">      transition:transform .12s ease, background .12s ease;</td></tr><tr><td class="line-number" value="169"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="170"></td><td class="line-content">  .back-btn:hover{ background:#e9ecef; transform:translateY(-1px); }</td></tr><tr><td class="line-number" value="171"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="172"></td><td class="line-content">  .legend-card{ z-index: 2001!important; } /* pastikan atas Mapbox controls */</td></tr><tr><td class="line-number" value="173"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="174"></td><td class="line-content">  .legend-nav {</td></tr><tr><td class="line-number" value="175"></td><td class="line-content">    display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;</td></tr><tr><td class="line-number" value="176"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="177"></td><td class="line-content">.legend-btn {</td></tr><tr><td class="line-number" value="178"></td><td class="line-content">    display:inline-flex; align-items:center; gap:6px;</td></tr><tr><td class="line-number" value="179"></td><td class="line-content">    background:#f4f6f8; border:1px solid #e2e8f0; border-radius:8px;</td></tr><tr><td class="line-number" value="180"></td><td class="line-content">    padding:8px 10px; font-size:12px; color:#333; text-decoration:none;</td></tr><tr><td class="line-number" value="181"></td><td class="line-content">    box-shadow:0 1px 2px rgba(0,0,0,.05);</td></tr><tr><td class="line-number" value="182"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="183"></td><td class="line-content">.legend-btn:hover { background:#eef2f6; }</td></tr><tr><td class="line-number" value="184"></td><td class="line-content">.legend-btn .kecil { opacity:.7; font-weight:600; }</td></tr><tr><td class="line-number" value="185"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="186"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="187"></td><td class="line-content">    <span class="html-tag">&lt;/style&gt;</span></td></tr><tr><td class="line-number" value="188"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="189"></td><td class="line-content">    <span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://unpkg.com/@turf/turf@6.5.0/turf.min.js" rel="noreferrer noopener">https://unpkg.com/@turf/turf@6.5.0/turf.min.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="190"></td><td class="line-content"><span class="html-tag">&lt;/head&gt;</span></td></tr><tr><td class="line-number" value="191"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="192"></td><td class="line-content"><span class="html-tag">&lt;body&gt;</span></td></tr><tr><td class="line-number" value="193"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">id</span>="<span class="html-attribute-value">map</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="194"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">bus-cards-container</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">busCards</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="195"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-card text-center</span>"&gt;</span></td></tr><tr><td class="line-number" value="196"></td><td class="line-content">    <span class="html-tag">&lt;img <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://live.paj.com.my/assets/logo-main.png" rel="noreferrer noopener">https://live.paj.com.my/assets/logo-main.png</a>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">logo-container mt-2</span>" <span class="html-attribute-name">alt</span>="<span class="html-attribute-value">Logo</span>" <span class="html-attribute-name">style</span>="<span class="html-attribute-value">width: 70px; height: auto;</span>"&gt;</span></td></tr><tr><td class="line-number" value="197"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="198"></td><td class="line-content">    <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-item</span>"&gt;</span></td></tr><tr><td class="line-number" value="199"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-icon</span>" <span class="html-attribute-name">style</span>="<span class="html-attribute-value">background-image: url(https://live.paj.com.my/assets/bus-marker.png)</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="200"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-text</span>"&gt;</span>Bas<span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="201"></td><td class="line-content">    <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="202"></td><td class="line-content">    <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-item</span>"&gt;</span></td></tr><tr><td class="line-number" value="203"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-icon</span>" <span class="html-attribute-name">style</span>="<span class="html-attribute-value">background-image: url(https://live.paj.com.my/assets/bus-stop-marker.png)</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="204"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-text</span>"&gt;</span>Perhentian<span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="205"></td><td class="line-content">    <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="206"></td><td class="line-content">    <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-item</span>"&gt;</span></td></tr><tr><td class="line-number" value="207"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-route</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="208"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-text</span>"&gt;</span>Laluan<span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="209"></td><td class="line-content">    <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="210"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="211"></td><td class="line-content">    <span class="html-comment">&lt;!-- NEW: Butang Kembali --&gt;</span></td></tr><tr><td class="line-number" value="212"></td><td class="line-content">    <span class="html-tag">&lt;a <span class="html-attribute-name">class</span>="<span class="html-attribute-value">back-btn</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://live.paj.com.my/" rel="noreferrer noopener">https://live.paj.com.my</a>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">btnBack</span>"&gt;</span></td></tr><tr><td class="line-number" value="213"></td><td class="line-content">        <span class="html-comment">&lt;!-- ikon anak panah kecil (SVG inline supaya tiada dependensi) --&gt;</span></td></tr><tr><td class="line-number" value="214"></td><td class="line-content">        <span class="html-tag">&lt;svg <span class="html-attribute-name">width</span>="<span class="html-attribute-value">14</span>" <span class="html-attribute-name">height</span>="<span class="html-attribute-value">14</span>" <span class="html-attribute-name">viewBox</span>="<span class="html-attribute-value">0 0 24 24</span>" <span class="html-attribute-name">fill</span>="<span class="html-attribute-value">none</span>" <span class="html-attribute-name">aria-hidden</span>="<span class="html-attribute-value">true</span>"&gt;</span></td></tr><tr><td class="line-number" value="215"></td><td class="line-content">          <span class="html-tag">&lt;path <span class="html-attribute-name">d</span>="<span class="html-attribute-value">M10 19l-7-7 7-7</span>" <span class="html-attribute-name">stroke</span>="<span class="html-attribute-value">#2b2e34</span>" <span class="html-attribute-name">stroke-width</span>="<span class="html-attribute-value">2</span>" <span class="html-attribute-name">stroke-linecap</span>="<span class="html-attribute-value">round</span>" <span class="html-attribute-name">stroke-linejoin</span>="<span class="html-attribute-value">round</span>"/&gt;</span></td></tr><tr><td class="line-number" value="216"></td><td class="line-content">          <span class="html-tag">&lt;path <span class="html-attribute-name">d</span>="<span class="html-attribute-value">M3 12h18</span>" <span class="html-attribute-name">stroke</span>="<span class="html-attribute-value">#2b2e34</span>" <span class="html-attribute-name">stroke-width</span>="<span class="html-attribute-value">2</span>" <span class="html-attribute-name">stroke-linecap</span>="<span class="html-attribute-value">round</span>" <span class="html-attribute-name">stroke-linejoin</span>="<span class="html-attribute-value">round</span>"/&gt;</span></td></tr><tr><td class="line-number" value="217"></td><td class="line-content">        <span class="html-tag">&lt;/svg&gt;</span></td></tr><tr><td class="line-number" value="218"></td><td class="line-content">        Kembali</td></tr><tr><td class="line-number" value="219"></td><td class="line-content">    <span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="220"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="221"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://code.jquery.com/jquery-3.6.0.min.js" rel="noreferrer noopener">https://code.jquery.com/jquery-3.6.0.min.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="222"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.js" rel="noreferrer noopener">https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="223"></td><td class="line-content"><span class="html-tag">&lt;script&gt;</span></td></tr><tr><td class="line-number" value="224"></td><td class="line-content">    let geojson = {"name":"KL003","type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"LineString","coordinates":[[103.3231615540099,2.036423827852589],[103.3234565788916,2.036033430354247],[103.3239008183216,2.035520101092293],[103.3240905986722,2.035325641777366],[103.3249389823014,2.036051631144931],[103.3261114364162,2.037314654221597],[103.3269309490476,2.037988272337407],[103.3271811111335,2.037787020902328],[103.3274788396023,2.037621363841151],[103.3277362488651,2.037510389655481],[103.3281830201924,2.037422853730526],[103.3285972341393,2.037452812424306],[103.3296188808146,2.037807804484883],[103.330700527275,2.036598108872694],[103.33108377167,2.036138592412601],[103.3315383722862,2.036464667884977],[103.3327926896417,2.037497867113776],[103.3333709801722,2.037902329613073],[103.3341335111489,2.038367107023738],[103.3352768485483,2.038780518454651],[103.3359954290488,2.039088974866901],[103.3370030062561,2.039521899146411],[103.3372383849306,2.039720222199403],[103.3380694705149,2.040571753606353],[103.3387637999312,2.041349624522366],[103.3395235506225,2.042196609759618],[103.3402374247856,2.042985391560483],[103.3411013802733,2.043934778580721],[103.3419434643749,2.044842124734234],[103.3428135615783,2.045792834777891],[103.3439678652936,2.047025617574626],[103.3450512650784,2.048202925824947],[103.346093360677,2.049356690489442],[103.3471376179045,2.050362808010363],[103.3479135688298,2.05112199221243],[103.3483759937192,2.051358766212347],[103.3492972172126,2.051679466357834],[103.3507567407581,2.052124550242836],[103.3512526028142,2.052289851583553],[103.3522493438669,2.052885351529743],[103.3533434016495,2.053494701903479],[103.3549309370847,2.054429989827389],[103.3569256601675,2.055638564503151],[103.3590537971891,2.056887391114366],[103.3593431250829,2.057047362374841],[103.3596712684853,2.057250355733138],[103.3599922140613,2.057557982055295],[103.3604735439499,2.058244860003795],[103.3607435952444,2.058601519070191],[103.360949073342,2.058978368581338],[103.3610584457682,2.05943241665279],[103.3611205981533,2.059861313722062],[103.3612383431734,2.060470418494094],[103.3613275898034,2.060790397858043],[103.3614420607144,2.061087325100997],[103.3615976881445,2.061428500114821],[103.3618224800681,2.061785155918651],[103.3621665229976,2.062393461396974],[103.3626905442451,2.063249712218933],[103.3630250282538,2.063805993836923],[103.3633822465315,2.064392038966246],[103.363807125927,2.065100117170704],[103.3643260347911,2.065975704003882],[103.3646245162138,2.066470986739151],[103.3650005280795,2.06715357049726],[103.3652410161123,2.067658946057088],[103.3653384797501,2.067978119224701],[103.3655149753282,2.068671837580447],[103.3656798899784,2.069335390885581],[103.3657853419856,2.069781089449496],[103.3658448827632,2.06996044394233],[103.3658882501732,2.070080191552046],[103.3660163332475,2.07026525076866],[103.3662185184032,2.070564649550155],[103.366420618371,2.07074703528435],[103.3667264311845,2.070897535687231],[103.3670937230803,2.071003207780333],[103.3676198054837,2.071151816436495],[103.367999565476,2.071413245902228],[103.3681383040717,2.071612150388898],[103.3685307382249,2.07213163733962],[103.3689478810563,2.072833948440664],[103.3692443071683,2.073381589296243],[103.36960904171,2.074054958278358],[103.370023295493,2.074906370070043],[103.3704407109605,2.075742373543027],[103.3707989304645,2.076421835063084],[103.3712117035407,2.077222283739866],[103.37156015778,2.077880867006014],[103.3721044167014,2.078625949587407],[103.3722236816101,2.078805195912102],[103.3723405016383,2.079126359538955],[103.3723973986005,2.079310872463654],[103.3724171171225,2.079529122818892],[103.3724459849421,2.079965978794645],[103.3724858242573,2.080708434058966],[103.3725160710422,2.08120773347619],[103.3725432735503,2.081909519478067],[103.3725860495984,2.082180130027706],[103.372659683766,2.082374384227065],[103.372750309871,2.082614340583906],[103.3729668320862,2.083084944618734],[103.3732543194863,2.083719744372877],[103.373453017274,2.084146917258463],[103.3736256037201,2.084517481888871],[103.3738421547057,2.085015082561252],[103.374293773773,2.085755485955953],[103.3745980005978,2.086334569997201],[103.3749526577872,2.086963495879871],[103.3752847248284,2.087348409035322],[103.3761295508052,2.087993096586759],[103.3770507773021,2.088872905862345],[103.3773962191591,2.088959253864219],[103.3781394994449,2.089171258402036],[103.3788124432355,2.089281503054688],[103.3793184928762,2.089450365699059],[103.3800113906393,2.089916740144956],[103.3803127840941,2.090185925847844],[103.3810796787137,2.091247723990905],[103.3811814459395,2.091456082002469],[103.3813442573454,2.091569317633398],[103.3815902217517,2.091648416321351],[103.3821890999275,2.091959289279816],[103.3825212954073,2.092140490799533],[103.3832230933856,2.092786134636006],[103.3834302436492,2.093020953794055],[103.3838168175342,2.093580721281893],[103.3839486227276,2.093847735287965],[103.3840298378268,2.09417336642427],[103.3841841866558,2.094769983779979],[103.3842658711284,2.095105784948653],[103.3843690530392,2.095462045495118],[103.3845115139188,2.095632802486225],[103.3849451704882,2.096178070557983],[103.3853323868509,2.096682549963282],[103.3855880083907,2.096851727481473],[103.3861696553608,2.097243299250224],[103.3865253475094,2.097407279182202],[103.3873058574673,2.097393840371227],[103.3878936396064,2.097345913250769],[103.3883865855991,2.097266144296746],[103.3888269538059,2.097130830978322],[103.388833891434,2.09713067214412],[103.3893244909766,2.097249896440937],[103.3902231303538,2.097440450698911],[103.3907211303331,2.097608550225757],[103.3910304407705,2.097783134035737],[103.3917924626572,2.09818948587436],[103.3930746862876,2.098933783072358],[103.3933942235792,2.099173467545544],[103.3941030641478,2.099769320906627],[103.3946802953579,2.100355275234647],[103.3952591059523,2.10107863697962],[103.3954590267823,2.101434868122155],[103.3955170219043,2.101607550488937],[103.3955308492177,2.101874172793213],[103.3954693532343,2.102272137156216],[103.3954251332812,2.102525394444382],[103.3954287099948,2.102814659964888],[103.3955433515997,2.103113738066307],[103.3957286756172,2.103332553131795],[103.3960190931287,2.10361655239889],[103.396253590411,2.103834496123769],[103.3965010711279,2.103985434314557],[103.3971362646994,2.104374182399666],[103.3979192430348,2.104658235404741],[103.3984161375918,2.105009939647201],[103.3988408883727,2.105303390192141],[103.3999942820354,2.106320703430263],[103.4003294574079,2.106597370354758],[103.4004932856674,2.106701168161596],[103.4006469665284,2.106792086253299],[103.4006839617926,2.106806544636055],[103.4010533793408,2.106894326699684],[103.4014261101655,2.106901141899803],[103.4018083964188,2.106904064799086],[103.4023551706442,2.106943763005781],[103.40280995011,2.107008660783996],[103.4032825707672,2.107082494811317],[103.4036969367254,2.107183175386168],[103.4041720239615,2.107441341514263],[103.4043742993609,2.107718793602744],[103.4045328221409,2.108048158038293],[103.4046523774871,2.108424456857835],[103.4048032510669,2.108733972685825],[103.4049876517449,2.109052163289764],[103.4053490475572,2.109443346078025],[103.4058975164881,2.110051782183021],[103.4062806328222,2.110507072912457],[103.4064491816178,2.110844007053993],[103.4064603648686,2.111098923329141],[103.4063463001962,2.111536568691862],[103.4062763077583,2.111920461969432],[103.4062935033591,2.112195961659406],[103.4063423859849,2.112398086453707],[103.4063929903054,2.112612369258903],[103.4065345387205,2.112809666413886],[103.4068487139007,2.113130556647196],[103.4081160088657,2.114399196831796],[103.4092299411203,2.115516243039403],[103.410181454392,2.116446008906181],[103.4108270127404,2.117070951795136],[103.4113512786549,2.117599863228255],[103.4116591559362,2.117907644007563],[103.4118821788971,2.118120959302436],[103.4120252134872,2.118372958351414],[103.4122774000869,2.118766411138211],[103.4124031925195,2.11906224802093],[103.4125474112235,2.11925734786953],[103.4127609473601,2.119368627121027],[103.4132979281432,2.119623709790962],[103.4136212526114,2.119795519140766],[103.4139391497131,2.120057895187753],[103.4140999612062,2.120299501299897],[103.4142315510341,2.120541518873842],[103.4143502555896,2.120835114376534],[103.4145694897102,2.121290140162349],[103.4146219019272,2.121398236000676],[103.4148873175527,2.121560390666013],[103.4150651950776,2.121600123901017],[103.4152888142324,2.121750792255211],[103.4156893053763,2.122023498676458],[103.4159242166116,2.122272593367284],[103.4161039966504,2.122476557648773],[103.4163531479374,2.122861196153854],[103.4164763580184,2.12308435172562],[103.4165635940077,2.123350910710421],[103.4166629512557,2.123593821129381],[103.4168269596395,2.123876161446134],[103.417092671029,2.12408389434329],[103.4172500040607,2.124150437590825],[103.4174310715748,2.124243661415575],[103.4176334665884,2.124313823175731],[103.4179975220029,2.124433534956688],[103.4182174242794,2.124488385635932],[103.4184117075899,2.124551323697971],[103.4186970324933,2.124651388838376],[103.4188886014096,2.124762977407999],[103.4193790895417,2.125170969638841],[103.4199688651212,2.125785340839705],[103.420638137167,2.12646594363961],[103.4209447915439,2.1268004636178],[103.4212945135356,2.127166795867687],[103.4219639628009,2.127774974772427],[103.4230292066242,2.128849656142021],[103.4241529248327,2.129905406745456],[103.4252452163166,2.131036440547496],[103.4265668414467,2.132316546921779],[103.4277221540153,2.133439481534139],[103.4283155831042,2.134018767287996],[103.4291607797557,2.13487757256373],[103.4293275127952,2.134994985798935],[103.4295496106121,2.135102381631047],[103.4299007931143,2.135161782543197],[103.4302840679033,2.135136579475095],[103.4305883703427,2.135099608835004],[103.4310840826237,2.135074061578078],[103.4314395053508,2.13509085038602],[103.4317899862358,2.135210555290398],[103.4323359290734,2.135387454735774],[103.4327762454056,2.13564180134],[103.4329819300056,2.135826291233537],[103.4331935124817,2.136114213038106],[103.4336463464104,2.136692013636929],[103.4342261502042,2.137333617181473],[103.4353561765352,2.138366577242572],[103.4359261349661,2.138870056561715],[103.4363670333746,2.139359952194607],[103.4375235640567,2.140710347924051],[103.4388687032369,2.142418353993922],[103.4391778511329,2.142765129999395],[103.4394308788907,2.143010667738458],[103.4396779779545,2.143167207497683],[103.4400012376043,2.143172043847154],[103.440382293441,2.143055602651371],[103.4415208887539,2.142486101962819],[103.4426105479856,2.141987388518317],[103.4429893539038,2.141801860110419],[103.4434518754774,2.141489510806053],[103.4437537753892,2.141176410539826],[103.4438616734375,2.141049267217004],[103.4440071108242,2.140916694834628],[103.4448615471142,2.140201554107652],[103.4457950019965,2.139435806439807],[103.4470864960919,2.138176547520336],[103.4482601631211,2.137110385093086],[103.4496714735221,2.135776733375083],[103.4500111313918,2.135433767769188],[103.4503393655161,2.135202415816448],[103.4505891130891,2.13515375483129],[103.4508604635049,2.135202449464428],[103.4514147377688,2.135365783416638],[103.4518210361699,2.135474770077471],[103.4525050708684,2.135736814265278],[103.4527327610307,2.135860999317049],[103.452914156194,2.136051578048528],[103.4530655738979,2.136396142647097],[103.453172391654,2.136617933734575],[103.4533098152574,2.136805706596561],[103.4534679739787,2.136904685877702],[103.4541889974129,2.1370763891701],[103.4550296690929,2.13717026974548],[103.4552809725733,2.137218049944681],[103.4556321915823,2.137282502298239],[103.4560320935696,2.137285804445513],[103.4562457004898,2.137276133580854],[103.4567216547645,2.137199542133378],[103.457384835715,2.137074843686452],[103.4577167042805,2.13699320262204],[103.4580292236639,2.136960433387307],[103.4585958280818,2.137078596217358],[103.4589255718767,2.137216754327306],[103.4596798811008,2.1375679595746],[103.4599256910559,2.137697645083564],[103.4601020135523,2.137858265442939],[103.4606754515199,2.138430988790091],[103.4608596116593,2.138536741530897],[103.461041651668,2.138620694261469],[103.4612993245316,2.138681086362432],[103.4615138973602,2.13872373150438],[103.4617026489881,2.138727285785658],[103.4623424083816,2.138693148916026],[103.4626329562478,2.138681277211983],[103.4629049710606,2.138737473398162],[103.4632036610367,2.138788390812551],[103.4637579147897,2.138897024312008],[103.4642518389549,2.138985176638365],[103.4646334240379,2.139114921256797],[103.4648559528304,2.139252194772428],[103.4652974369794,2.139629838727542],[103.4658786493241,2.14008692481494],[103.4660453648301,2.140225034745471],[103.466253340863,2.140295678600729],[103.4664615730657,2.140341837969051],[103.4670993781091,2.140488411210416],[103.4682456529729,2.140734609200341],[103.4698595593722,2.141096660024958],[103.4704214973882,2.141222131134752],[103.4708695658047,2.141343031138703],[103.4712607528494,2.141464728596996],[103.4717878269786,2.141671149618735],[103.472201449888,2.141915186160813],[103.4726725176559,2.142318508572889],[103.4730437431782,2.142800965706779],[103.4732029202763,2.143174520397833],[103.4736494097818,2.144426865714487],[103.4740417748957,2.145352384043924],[103.4741898813218,2.145768401497169],[103.4743971915436,2.146217201341177],[103.4746058999863,2.146545027771228],[103.4751073864175,2.147092409274806],[103.475816985156,2.147960409895112],[103.4766834785982,2.148892261262525],[103.4776931880151,2.149997114791731],[103.4784291137091,2.15074223509863],[103.4785876879659,2.15106490068166],[103.4790020175212,2.151882687336723],[103.4793468534232,2.152699913885876],[103.4794901432156,2.152888538070569],[103.4797831105913,2.15300126241383],[103.4800543376552,2.153081920349316],[103.4803217677979,2.153169011985394],[103.4805179179001,2.153340513607407],[103.4808071885098,2.153563300750496],[103.481142538571,2.153863600432285],[103.4815653166062,2.154356374350305],[103.4820961226343,2.154963655631676],[103.4826918158149,2.155707761782658],[103.4833277616572,2.156525877738595],[103.4836359643892,2.15702825903932],[103.4840144202462,2.157493305298442],[103.4843583290247,2.157856919681723],[103.4845560042845,2.157998464733555],[103.4848318642557,2.158117604715848],[103.4853915808044,2.158152081230841],[103.4857152367995,2.158195926289007],[103.4859564613377,2.158249579698342],[103.4862120086216,2.158415588982976],[103.4863732886667,2.158642366547093],[103.4866539386497,2.159017671877837],[103.4871980280863,2.159637458430181],[103.487322441145,2.159872507132014],[103.4874396461947,2.160171209959079],[103.4875691564217,2.160485475053524],[103.4877396609336,2.16079344877536],[103.4879920582987,2.161100417905919],[103.4882849782358,2.161399767317001],[103.4889278875285,2.162053196911462],[103.4891922249986,2.162345344183371],[103.4894122830818,2.162758631067119],[103.4900606423986,2.163767505774211],[103.4904041462119,2.16424116487338],[103.4906897508105,2.164658600460954],[103.4909711261019,2.165066345569038],[103.4912341162154,2.165748339022582],[103.4914064446141,2.166270418957577],[103.4916251868051,2.166697196015182],[103.4918797603803,2.167075388000596],[103.4920505291493,2.16733819043757],[103.492272923859,2.167936946955528],[103.4922721990489,2.167950951235131],[103.4923427216945,2.168382067302828],[103.4924492828833,2.169285221654084],[103.4925164653592,2.169491996569422],[103.4926381765854,2.169599562075184],[103.4929910612958,2.169867707976537],[103.4929953329154,2.169877316130688],[103.4931563971235,2.17001748209905],[103.4932375335152,2.170248333524889],[103.4933070552053,2.170459961131702],[103.4933758634532,2.1705785453039],[103.4935637425873,2.170729047160249],[103.493766423867,2.170880962983957],[103.4940374405954,2.170982029019943],[103.4945129332523,2.17106935144499],[103.4948701472937,2.171070534327857],[103.4957934437996,2.171030911308117],[103.4960916729648,2.17105809832585],[103.4963806601656,2.171060997430276],[103.4966771947238,2.171176707232537],[103.4969993369169,2.171454365830383],[103.4971644706526,2.171632216907238],[103.4971658199797,2.171651142374977],[103.4972656530777,2.171837011935751],[103.4973743252383,2.172001388368323],[103.4975619927478,2.172222318788458],[103.4977718842241,2.172313333580453],[103.4980228172333,2.172384192356832],[103.4982101272105,2.172389301762032],[103.4989194758396,2.172371270303559],[103.4991114775067,2.172438936964531],[103.4992329558249,2.1725263721446],[103.4993815624405,2.172648992017121],[103.4998591470859,2.173051120429991],[103.5000819850738,2.173157256919315],[103.5003218714443,2.173269638600401],[103.5006966086452,2.173448843788855],[103.5010013378795,2.173593465707959],[103.5011798917012,2.173778931558081],[103.501330443451,2.173982914529615],[103.5013567104649,2.174313699054145],[103.5013437825052,2.17484735619282],[103.5013778277821,2.175010877863199],[103.5014213517764,2.175175688419485],[103.5015286203905,2.175313004415571],[103.5016244656925,2.175384510783514],[103.5019002114929,2.175548588057195],[103.5021811370502,2.175615828327851],[103.5030766311746,2.17590099878099],[103.5033441572513,2.175961672463474],[103.5036912035027,2.176037355553367],[103.5042554473397,2.176193447622532],[103.5043944208423,2.176203859222569],[103.5045783721221,2.176167866052199],[103.5047448330228,2.176099347437257],[103.5050001126256,2.17600789904863],[103.505201120788,2.175955210328605],[103.5053587126625,2.175939101817341],[103.5055682669783,2.175938458317195],[103.5057610664865,2.176021229182141],[103.5058509118596,2.176201920366457],[103.5058968173627,2.176408580263945],[103.5059325127359,2.17696179585376],[103.5059436407976,2.177158667508951],[103.5059847260766,2.177396937662763],[103.506099512714,2.177613188642996],[103.5062681514761,2.17783031967407],[103.5065137539931,2.17814389007471],[103.5066239864545,2.178316491683184],[103.5067171043237,2.17854651968824],[103.5067734913866,2.178756673329552],[103.5068584326022,2.179098581023611],[103.5069896693156,2.179311952883127],[103.5072239554583,2.17956123651302],[103.5074279304,2.17974666716474],[103.5081580055026,2.180505426141161],[103.5090987951916,2.181526462519918],[103.5104916224013,2.183126623513004],[103.5116654950694,2.184422006313657],[103.5134933387652,2.186601662813097],[103.514470754538,2.187665086320396],[103.5146390767209,2.188001048341564],[103.5146742541658,2.188165818972069],[103.5147059120923,2.18836293588016],[103.5146633660985,2.189415209037315],[103.5147020880286,2.189689300097813],[103.5147645883652,2.189895608386446],[103.5148857934405,2.190243054478323],[103.5150107734309,2.190436474938747],[103.5154705692069,2.191227616080382],[103.5165707196795,2.193003377802838],[103.5174725977827,2.194494094784598],[103.5183990578974,2.196123313456137],[103.5193027038639,2.197746812711756],[103.5203133530047,2.199163908597002],[103.5213750224064,2.200947225457041],[103.5219457517333,2.20176493025086],[103.522689741834,2.202496969912707],[103.5233281013811,2.202972074444213],[103.5239922610136,2.203441383437327],[103.524703797847,2.203988984858935],[103.525481598152,2.204534352318587],[103.5267633655243,2.205420518824006],[103.5282655920584,2.206571202459907],[103.5302172660994,2.208075042157119],[103.5318597308284,2.209321058500613],[103.5335388479038,2.210524163110246],[103.535733689941,2.212180902843405],[103.5377138597973,2.213638741697463],[103.5400156340249,2.21539427465196],[103.542122619191,2.217029500641431],[103.5442909141051,2.218741544666135],[103.5459616195625,2.219886207019615],[103.5481235826447,2.221652465949644],[103.5504103475382,2.223348954755069],[103.5522584454169,2.224729008068944],[103.5542467638647,2.226271026610972],[103.5559030934555,2.22752438561926],[103.5576246718695,2.228794053336609],[103.5597949742596,2.230437730816587],[103.5627721354894,2.23268833236479],[103.5657778375213,2.234984302642069],[103.5693372968838,2.237700893236025],[103.572692247198,2.240384884171002],[103.5750528138147,2.242279681775507],[103.5767989260782,2.243794274488844],[103.5789573328627,2.245798100006061],[103.5809940234198,2.247654404329133],[103.5821340791622,2.248670400345092],[103.5838131908345,2.24987431674263],[103.5848500420717,2.250598135573433],[103.5869757089771,2.252244434575281],[103.5889801653931,2.25368093450383],[103.5919489407678,2.255817073002066],[103.595002395227,2.25785212582062],[103.597928311814,2.259733632438575],[103.6020380880034,2.261689286690636],[103.603136137271,2.262382709114904],[103.6048500616341,2.26504324728955],[103.6059218334723,2.266701709201728],[103.6065951019413,2.26722674955897],[103.607863700081,2.268033061853063],[103.6088363198543,2.268583895367636],[103.6094865077074,2.268979611732344],[103.6099977805894,2.269367203260498],[103.6116556834384,2.270664809045796],[103.6121487513492,2.271022061851195],[103.6136149812944,2.272298177837604],[103.6150108641325,2.273336423933266],[103.6160894770619,2.274669452334377],[103.616105885799,2.274437945226438],[103.6152278026301,2.273315573329264],[103.614552030146,2.272881620236878],[103.6109318666846,2.269949589966507],[103.6075248285749,2.267558781702479],[103.6065519070857,2.267072901749184],[103.6059431374359,2.266541154103011],[103.6050112402542,2.265089959316365],[103.604823311113,2.264559982306324],[103.6036171579713,2.262740637267948],[103.6026663324863,2.261653422237453],[103.5994383238198,2.260247520136582],[103.5982377306664,2.259703632194118],[103.5981824423986,2.259703632462949],[103.5966511853734,2.258697506182479],[103.5940691154732,2.257064092612448],[103.5916803221082,2.255491425949836],[103.5891781154173,2.253691938839748],[103.5859678161057,2.251337931199336],[103.5831478966498,2.249271156621213],[103.5814864452195,2.247999943581606],[103.5787955744254,2.245552315418503],[103.5761896723925,2.243174425346476],[103.5742814091536,2.241555107850404],[103.5711935132635,2.239100866386524],[103.5689170983441,2.237275071985442],[103.565677746525,2.234826967909185],[103.5620074882019,2.232045047632249],[103.5580463581923,2.229028586815925],[103.5558864461197,2.227432466327372],[103.552783367628,2.225059947874158],[103.5512409434122,2.223913206886342],[103.5490555952546,2.222234004297193],[103.5471143959302,2.22072010976045],[103.5449554465418,2.219100053023409],[103.5447504072169,2.21896470529125],[103.5429672396785,2.217637225392693],[103.5407220779839,2.215850885223015],[103.538550183464,2.214194637902868],[103.5366056810668,2.212715545659635],[103.5344894589047,2.211147953325893],[103.532545872771,2.209739884868517],[103.5301004123082,2.207926462671017],[103.5281345664257,2.20639858833654],[103.5251991849795,2.20424307070676],[103.5230803346574,2.202691498139632],[103.5218974975309,2.201639693154509],[103.5215011824984,2.200988495459139],[103.5202325146921,2.198951365144762],[103.5187723001649,2.196552177101869],[103.5172373439988,2.194003151218388],[103.5153884748782,2.190944502105284],[103.514920292319,2.190178987360109],[103.5147827490688,2.189822295134161],[103.5147250427179,2.189071022166398],[103.5147254751004,2.188215882570507],[103.5146979339835,2.188066886665723],[103.5141726353145,2.187255327086906],[103.5132963346513,2.186268939492794],[103.5119502548197,2.184642279976397],[103.5106715054163,2.183257311431505],[103.5092114468581,2.181553793297442],[103.5079368377299,2.180222648592598],[103.5070722818731,2.179253280881621],[103.506990935104,2.179152129537667],[103.506912906705,2.179074240984551],[103.5067961536099,2.178618872604838],[103.5066987031186,2.178344203676221],[103.5065897325602,2.178152181354421],[103.5061970130708,2.177653401451594],[103.506098309533,2.177516774574868],[103.5060068615172,2.177271785406743],[103.5059675565921,2.176729332471629],[103.5059245665158,2.176283732471196],[103.5058973335415,2.176145077639674],[103.5058495671553,2.176022124882927],[103.5055701966191,2.175863913906071],[103.5054225734421,2.175886886441424],[103.5052105157579,2.175905672100915],[103.5048965200958,2.175996317093179],[103.5045956073619,2.176079234323903],[103.5043772124444,2.176143565831053],[103.5041950694784,2.176124192731761],[103.5032857023006,2.175863295445277],[103.502011491847,2.175496365344058],[103.5017731180828,2.175434514188943],[103.5015869639268,2.175274642865158],[103.5014614038414,2.175063390680818],[103.5014055715809,2.174801634891951],[103.5014073008476,2.174570536450506],[103.5014191335459,2.174042146749127],[103.501373319413,2.173890578692445],[103.5012975040592,2.173775068195916],[103.501025160869,2.173529984667519],[103.5008114272892,2.173426639373314],[103.5002977920532,2.173190277722007],[103.5001128926921,2.173136323249504],[103.4998525206228,2.172942911155896],[103.4995128689598,2.172691059698187],[103.4991857982805,2.17237743286751],[103.4989655724296,2.172316676066515],[103.4987173653322,2.17231615499272],[103.4979055019772,2.172288956402558],[103.4976826218953,2.172177943527879],[103.4975243941321,2.1720551909104],[103.4970992905839,2.171467110203306],[103.4968873242339,2.171258828597911],[103.4966264511793,2.171077622290059],[103.4964766423113,2.171031432830436],[103.4962084757722,2.171013170402842],[103.4950827209419,2.171013567179607],[103.4946558748998,2.171015409625505],[103.4944041716504,2.171013087229886],[103.4939483597857,2.170885123722648],[103.4937598482596,2.17081308853894],[103.4934296896722,2.170560562266901],[103.4932941983728,2.17025229294071],[103.4932126034117,2.169998141932513],[103.4930829585878,2.169866292073168],[103.4927299338602,2.169623372912253],[103.4926048236369,2.169490264535552],[103.4925082234682,2.169277733156062],[103.4924203459892,2.168629524664857],[103.4922619794337,2.167784757334053],[103.4921131911244,2.167326227774327],[103.4920202902858,2.167134389169334],[103.4918525606844,2.166975075608084],[103.491499579365,2.166322384455487],[103.4913243150889,2.165856905772656],[103.4907474912119,2.164645044634854],[103.4904826838164,2.164263744481756],[103.49002785427,2.163624543022375],[103.4894911101985,2.162809099885022],[103.4887432633286,2.161811528574927],[103.488067056045,2.161051329976356],[103.487686839691,2.160501481627369],[103.4875161567437,2.160143819067387],[103.4874082270335,2.159910185981806],[103.4872882370503,2.159698163434032],[103.4869581709706,2.15929185012908],[103.4865814539564,2.158845923383988],[103.4863028826349,2.158458641796059],[103.4860362528129,2.158243281086554],[103.4859196353136,2.158184257620575],[103.4857393029815,2.1581452431938],[103.4848103508035,2.158048948725764],[103.4846955316986,2.158019270011668],[103.4845737583333,2.15794062331367],[103.4842804538622,2.157667167296958],[103.4839450535557,2.157281269616834],[103.4833212612678,2.156457171380764],[103.4829545951908,2.155955622800449],[103.4822366274159,2.15504135481252],[103.4819567227524,2.154711424758371],[103.4814377849396,2.15408409213145],[103.480852274351,2.153525420198246],[103.4806723362871,2.153377263573177],[103.4804177530263,2.153137449469464],[103.4802131440521,2.153092818569307],[103.4799483967941,2.153001329815782],[103.4796310657738,2.15289297201197],[103.4794862873316,2.152815907331324],[103.4793665412523,2.15262975571952],[103.478974860921,2.151711865559836],[103.4785546660879,2.150858938078453],[103.4783406111922,2.150586741129274],[103.4778539357984,2.150088222174213],[103.4773157179807,2.149522922707802],[103.4765100853534,2.148623696311792],[103.475525830344,2.147538548731709],[103.4746059463344,2.14647189310498],[103.4742306793265,2.145748785714934],[103.4738986363609,2.144935954577633],[103.473367955039,2.143509161056918],[103.4729402006577,2.142556087697619],[103.4723994941473,2.142021540127084],[103.4714280194502,2.141490141240169],[103.4708888730375,2.141288674399979],[103.4700182461509,2.141058282198618],[103.4690016297335,2.140825917740968],[103.467714077256,2.140568354441541],[103.4666360153765,2.140342578089854],[103.4663077479664,2.140255251192512],[103.4661391361751,2.140219103746186],[103.4660569393754,2.140142008684337],[103.4650844392581,2.139353945583646],[103.4645717991015,2.139000664083527],[103.4643723841078,2.138959154282477],[103.4636731461825,2.138819136257796],[103.4632087107017,2.138729761061512],[103.4626645067359,2.138634179313603],[103.4621453056878,2.138653279857959],[103.461870246644,2.138670416539135],[103.4615977491023,2.138687615816023],[103.4614075170606,2.138639955682493],[103.4610258071838,2.13855721804654],[103.4607913812338,2.138442379156025],[103.4605804478787,2.138240694153324],[103.4600543936442,2.13772569935054],[103.4595228610107,2.137422041133125],[103.459058731251,2.137233037848806],[103.4587275385045,2.137066327827913],[103.4580208469622,2.136917766488131],[103.4577653954605,2.136933387417922],[103.4570979811856,2.13707833244426],[103.4564448858715,2.137202214957851],[103.4560684802164,2.137239465799113],[103.4557945868319,2.137231672549729],[103.4550638823627,2.137136214962126],[103.4542266849934,2.137017036427746],[103.4535676364725,2.136881576762045],[103.4534959588539,2.136843779434666],[103.4533303128853,2.13668556518205],[103.4531701340294,2.136462937840091],[103.4529421649847,2.135984945843698],[103.4528635972757,2.135880012314049],[103.4524870899811,2.135678289682009],[103.4517988656186,2.135406705544321],[103.4513412894986,2.135257500259436],[103.4506583214502,2.135087079360722],[103.4503703538646,2.13514619933257],[103.4499312066176,2.135407645540957],[103.4490548536814,2.136257262551748],[103.4482069742514,2.137056511587169],[103.4471176537399,2.138109524714917],[103.4459889077854,2.139148021354643],[103.4453167588519,2.139732569081792],[103.4445829929028,2.140349320884387],[103.4436676120509,2.14112833115533],[103.4434584187078,2.141387970874817],[103.4432667620176,2.141549725296207],[103.442761640805,2.141828764100858],[103.4424798478634,2.14196422117378],[103.4418497539934,2.142292945640082],[103.4408878268785,2.142741297118187],[103.4401904611204,2.143045887987528],[103.4399672691912,2.143112192349762],[103.4397205503151,2.143089586589633],[103.4395366543571,2.143003759156064],[103.4387774978933,2.142248697046682],[103.4381950517187,2.141465596251213],[103.4372862770937,2.140329540080646],[103.4361839760216,2.139056440539974],[103.435605861318,2.138500489013605],[103.4353361736049,2.138304291064897],[103.43519031387,2.138127118513117],[103.4344210672218,2.137437606322918],[103.4338080398193,2.136806670731609],[103.4333261726019,2.136118906613517],[103.4330020602568,2.135701703499357],[103.4327673035135,2.135565660088599],[103.4315189861778,2.135056625829367],[103.4310694221154,2.13497956339274],[103.4308297749494,2.135033136733197],[103.4299680727984,2.135108307032052],[103.4297986361982,2.135095258021591],[103.4296324584489,2.135086799354856],[103.4295032168912,2.135015516379299],[103.4293502061136,2.134935848315688],[103.4290911046162,2.134732862804881],[103.4283921134362,2.134031005737784],[103.4271380525467,2.13278232223281],[103.4258597406593,2.131548414485901],[103.424354147536,2.130190222261079],[103.4230288930156,2.128934629388807],[103.4220627650792,2.12796361240496],[103.4207219521464,2.126641886220392],[103.4191805579677,2.124946909310082],[103.4187330658494,2.124595876153576],[103.4180286879976,2.124396380120655],[103.4173895925595,2.124170990908252],[103.4171688625262,2.124054706829934],[103.4170606100582,2.123984093118629],[103.4168981436919,2.123854024989849],[103.4166284975403,2.123420952852086],[103.4163709907902,2.122784704332018],[103.4162337372975,2.122561511588739],[103.4154393826763,2.121783327740331],[103.4152170040783,2.121605851774813],[103.4150027069893,2.121522123696169],[103.4148205482081,2.121452327867754],[103.4146598674499,2.121316873143896],[103.4145724967618,2.121146363284358],[103.4144006375868,2.120740087984586],[103.4143393828852,2.120585494578471],[103.4141482565597,2.120198936854327],[103.4135466026373,2.119678341275369],[103.4133487067193,2.119609949401933],[103.4127591019417,2.119261943092156],[103.412621741214,2.119206687619329],[103.4124470352598,2.118984207328868],[103.4121966725422,2.118518418205814],[103.412114043006,2.118378318015312],[103.4118821889756,2.118029354923292],[103.4116663889365,2.117811375151792],[103.4110410365567,2.117194275802023],[103.4103073865005,2.116450563488632],[103.4094970429167,2.115692969940286],[103.4085349625429,2.114732270096006],[103.4071982183376,2.113410834644181],[103.4064995930798,2.112681306897323],[103.4064114696031,2.112524709395505],[103.4063791033711,2.112334989084501],[103.4063419661751,2.112143282281182],[103.4063586395984,2.111768163727101],[103.4064183640763,2.111492792513971],[103.4065182098971,2.111095144104279],[103.4065239582643,2.110886978726469],[103.4064062107411,2.110594297744308],[103.4063007574489,2.110433068495887],[103.4056455952197,2.109672275260345],[103.4050523167663,2.109062862619153],[103.4046671744205,2.108595518667637],[103.4045996158005,2.108135494156606],[103.4043154287349,2.107551831373458],[103.403809348798,2.107171892068274],[103.4032010076119,2.107014720956389],[103.4026113283371,2.10693868156837],[103.4015409975596,2.10683830263837],[103.4009592720114,2.106798539445958],[103.4003970304456,2.106565662545548],[103.4001822659539,2.106374644552086],[103.3994250910844,2.105718103197619],[103.398371703259,2.104871907749592],[103.3978867084784,2.104568370278196],[103.3977617759902,2.104548990771002],[103.3971439414663,2.104289304683961],[103.3962906438501,2.103788296755136],[103.3956327224733,2.103114435298552],[103.3955426201195,2.102979832924718],[103.3954717406922,2.102763972269169],[103.3954866636942,2.102582698814763],[103.3955022520662,2.102382879021022],[103.395560986549,2.102016836111512],[103.3955753910236,2.101752609778871],[103.3955723361058,2.101511512898855],[103.3955046794617,2.101415689099456],[103.3954142216163,2.101256137997401],[103.3950269717575,2.100724991070873],[103.3944718454734,2.100040677387089],[103.3937942019117,2.099424606026043],[103.392907342884,2.098761211870452],[103.3921379442498,2.09833522549145],[103.390930070712,2.097630796700591],[103.3905047234444,2.097468756375438],[103.3898317884165,2.097297467321741],[103.3889809193658,2.097117261061405],[103.3885548336756,2.097158210158067],[103.3883543970812,2.097217560658061],[103.3880558850216,2.097265309167943],[103.3873758953075,2.097327585053778],[103.3868529395648,2.09734832477845],[103.3866049566401,2.097331831163314],[103.3864193925428,2.097278274522562],[103.3861113718494,2.097133515305821],[103.3853856033614,2.096643918683404],[103.3849748965826,2.096136524457399],[103.3844510129596,2.095383439326098],[103.3843587041292,2.095177178868285],[103.3841473950693,2.094380401445104],[103.3839573470884,2.093719788685495],[103.3837144857428,2.093333578212827],[103.3831351321537,2.092645923132773],[103.3823898348039,2.092017468748031],[103.381704766425,2.091643276880661],[103.3813151764858,2.091477784150635],[103.381242898222,2.091419737727599],[103.3809754085204,2.091014177996088],[103.3807174689564,2.090662132397313],[103.379767769994,2.089677394341245],[103.3792090712361,2.089383452074686],[103.3780662590867,2.08910541639057],[103.3769428045243,2.088819781645903],[103.3764480235672,2.088389409858658],[103.3757401075052,2.087782762353409],[103.3751631524068,2.087347289250063],[103.3750655061187,2.087269559632578],[103.3748170154052,2.086976560575188],[103.3747733258633,2.086843916806063],[103.3740991934904,2.085565476075188],[103.3735568006576,2.084250881876394],[103.373024233852,2.083124940706718],[103.3725122840042,2.081981061505258],[103.3724640334434,2.081110584117972],[103.372374637377,2.079657342945497],[103.3721489173518,2.078781589412972],[103.3717603680424,2.078208073171993],[103.3713277582062,2.077558879778326],[103.3708478246093,2.076642801755798],[103.3703687068445,2.075461249553807],[103.3695762471497,2.0739172114337],[103.3687547365661,2.072371537881819],[103.3682258809357,2.071626612440828],[103.3677472722831,2.071154249234692],[103.3674607835131,2.071038184837203],[103.3666920541144,2.070814539888293],[103.3664406445148,2.070667043433948],[103.3662016947975,2.070403012649217],[103.3659032931852,2.069940453552015],[103.3655507414147,2.068561284187888],[103.3650650471814,2.067059748136522],[103.3646736137433,2.066392689117206],[103.3637915407311,2.06496602021215],[103.3630343002727,2.063689463259409],[103.3622834124969,2.06248255193161],[103.3616466069185,2.061369421731848],[103.3613118712998,2.060499217048829],[103.3611400631382,2.059427028102335],[103.3610583259575,2.059060392758929],[103.3609048946132,2.058708631150562],[103.3605337728988,2.058247743751197],[103.3597463849557,2.057233111967415],[103.3588918744791,2.056691283635985],[103.3573521951624,2.055767810617329],[103.3560997791211,2.055051905599797],[103.3541522462431,2.053912167601872],[103.3528232007095,2.053045092848338],[103.3510317084004,2.052112731517762],[103.3498323090522,2.051745129684872],[103.3482568548835,2.051134729743178],[103.3479838236144,2.050970337845187],[103.3471381794085,2.050252914754779],[103.3459499802996,2.049042632872659],[103.3444041460587,2.047388890444055],[103.3424636149415,2.045360370349493],[103.3404199318422,2.043059008612157],[103.3388066078399,2.041290108864062],[103.3371935844094,2.039563864643865],[103.3363575005556,2.039086982161985],[103.3341710965612,2.038317055834517],[103.3339843707677,2.038177506891794],[103.3322595230298,2.036981056874725],[103.3311500781953,2.036057353122363],[103.3300498504958,2.035415088736858],[103.3296680495328,2.035291669534905],[103.3291359922362,2.034917361867639],[103.328879162285,2.034710306532086],[103.3278954501713,2.033509885893163],[103.3277090973716,2.033320397526209],[103.327548993773,2.033139085587843],[103.3273763858999,2.033051942479168],[103.3271523416771,2.033044015973753],[103.3270269191252,2.033207332721877],[103.3270587387941,2.033382458217936],[103.3271791531502,2.033538085163902],[103.3271826417539,2.033547344679548],[103.327248094875,2.033696950104166],[103.3270789425215,2.035050321781284],[103.3269785106115,2.035700287160821],[103.3268423469515,2.036143588517547],[103.3266059488718,2.036724159736982],[103.3262921872097,2.037263998337338],[103.3262441966225,2.037309173869154],[103.3260514973335,2.037069893330498],[103.3256383494318,2.036677633189017],[103.3250367362422,2.036050272739351],[103.3241317939157,2.035227095257465],[103.3238393405838,2.034999516065092],[103.3234305699317,2.034556371890203],[103.3233000697218,2.034431127826192],[103.322342503229,2.035888581553803],[103.3223448473914,2.036201721673615],[103.3225680772192,2.036557500235726],[103.3225751691862,2.036557500209169],[103.3228141063572,2.036632051572682],[103.3228567942338,2.036632051363217],[103.323057850088,2.036542202409322],[103.32309826288,2.036467741126551]]}}]};</td></tr><tr><td class="line-number" value="225"></td><td class="line-content">    let pois = [{"name":"Terminal Bas dan Teksi Kluang","lat":"2.03617998","lng":"103.32281295"},{"name":"Kahang","lat":"2.27422889","lng":"103.61571589"},{"name":"Affin Bank Kluang","lat":"2.03688800","lng":"103.33196200"},{"name":"Kampung Paya Kluang","lat":"2.03949900","lng":"103.33657300"},{"name":"SMK Sultan Abdul Jalil ","lat":"2.05108200","lng":"103.34778800"},{"name":"Taman Makmur","lat":"2.05186400","lng":"103.34950700"},{"name":"Taman Lambak","lat":"2.05377500","lng":"103.35361100"},{"name":"Longterm Distribution","lat":"2.06701100","lng":"103.36479500"},{"name":"Taman Puteri","lat":"2.07036000","lng":"103.36598000"},{"name":"Kampung Melayu 2 Batu 6","lat":"2.08380400","lng":"103.37317800"},{"name":"Penjara Kluang","lat":"2.09829000","lng":"103.39138100"},{"name":"Kampung Gajah ","lat":"2.10378000","lng":"103.39593800"},{"name":"Taman Perdana ","lat":"2.10550600","lng":"103.39864600"},{"name":"Kampung Contoh Kahang","lat":"2.20676100","lng":"103.52852900"},{"name":"Taman Ria Kahang","lat":"2.21203700","lng":"103.53576900"},{"name":"Taman Kahang Muhibah","lat":"2.21509200","lng":"103.53972500"},{"name":"Klinik Kesihatan Kahang","lat":"2.21615300","lng":"103.54092100"},{"name":"SMK Kahang","lat":"2.22149200","lng":"103.54797400"},{"name":"Kampung Pinggir","lat":"2.26916200","lng":"103.60980000"},{"name":"Kampung Sri Lulut","lat":"2.26189200","lng":"103.60269900"},{"name":"Kampung Peta","lat":"2.24994600","lng":"103.58424800"},{"name":"Kampung Orang Asli Punjut","lat":"2.24296700","lng":"103.57636500"},{"name":"Kampung Batu 24 Kahang","lat":"2.23046100","lng":"103.56039500"},{"name":"SJK(T) Batu 24, Kahang ","lat":"2.22766500","lng":"103.55658800"},{"name":"SMK Kahang (Return)","lat":"2.22092200","lng":"103.54785300"},{"name":"Taman Sri Kahang","lat":"2.21369200","lng":"103.53809500"},{"name":"Taman Kahang Baru","lat":"2.21206900","lng":"103.53601000"},{"name":"Taman Desa Sejahtera","lat":"2.10690500","lng":"103.40293900"},{"name":"Taman Perdana (Return)","lat":"2.10534100","lng":"103.39867400"},{"name":"Kampung Gajah (Return)","lat":"2.10360800","lng":"103.39602100"},{"name":"Penjara Kluang (Return)","lat":"2.09728600","lng":"103.38935900"},{"name":"Taman Perindustrian Matahari","lat":"2.07589600","lng":"103.37065400"},{"name":"Taman Puteri (Return)","lat":"2.07006100","lng":"103.36604300"},{"name":"Kimberly-Clark Products","lat":"2.06656300","lng":"103.36487200"},{"name":"Kampung Sembrong","lat":"2.05791400","lng":"103.36038100"},{"name":"Kawasan Perindustrian Sembrong","lat":"2.05546000","lng":"103.35686900"},{"name":"Taman Kasih","lat":"2.05426800","lng":"103.35492600"},{"name":"SMK Sultan Abdul Jalil (Return)","lat":"2.05065000","lng":"103.34776400"},{"name":"Taman Ria","lat":"2.04143600","lng":"103.33912800"},{"name":"Kampung Paya Kluang (Return)","lat":"2.03906100","lng":"103.33645100"},{"name":"Taman Aman Kluang","lat":"2.03784300","lng":"103.33370700"},{"name":"Terminal Bas dan Teksi Kluang","lat":"2.03617998","lng":"103.32281295"}];</td></tr><tr><td class="line-number" value="226"></td><td class="line-content">    let imageBusStop = 'https://live.paj.com.my/assets/bus-stop-marker.png';</td></tr><tr><td class="line-number" value="227"></td><td class="line-content">    let imageArrows = 'https://live.paj.com.my/assets/arrow-markers-red.png';</td></tr><tr><td class="line-number" value="228"></td><td class="line-content">    let imageBus = 'https://live.paj.com.my/assets/bus-marker.png';</td></tr><tr><td class="line-number" value="229"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="230"></td><td class="line-content">    // Convert POIs to GeoJSON format</td></tr><tr><td class="line-number" value="231"></td><td class="line-content">    const poisGeoJSON = {</td></tr><tr><td class="line-number" value="232"></td><td class="line-content">        type: 'FeatureCollection',</td></tr><tr><td class="line-number" value="233"></td><td class="line-content">        features: pois.map(poi =&gt; ({</td></tr><tr><td class="line-number" value="234"></td><td class="line-content">            type: 'Feature',</td></tr><tr><td class="line-number" value="235"></td><td class="line-content">            geometry: {</td></tr><tr><td class="line-number" value="236"></td><td class="line-content">                type: 'Point',</td></tr><tr><td class="line-number" value="237"></td><td class="line-content">                coordinates: [parseFloat(poi.lng), parseFloat(poi.lat)]</td></tr><tr><td class="line-number" value="238"></td><td class="line-content">            },</td></tr><tr><td class="line-number" value="239"></td><td class="line-content">            properties: {</td></tr><tr><td class="line-number" value="240"></td><td class="line-content">                name: poi.name</td></tr><tr><td class="line-number" value="241"></td><td class="line-content">            }</td></tr><tr><td class="line-number" value="242"></td><td class="line-content">        }))</td></tr><tr><td class="line-number" value="243"></td><td class="line-content">    };</td></tr><tr><td class="line-number" value="244"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="245"></td><td class="line-content">    // Create initial bus GeoJSON with empty features</td></tr><tr><td class="line-number" value="246"></td><td class="line-content">    const busGeoJSON = {</td></tr><tr><td class="line-number" value="247"></td><td class="line-content">        type: 'FeatureCollection',</td></tr><tr><td class="line-number" value="248"></td><td class="line-content">        features: []</td></tr><tr><td class="line-number" value="249"></td><td class="line-content">    };</td></tr><tr><td class="line-number" value="250"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="251"></td><td class="line-content">    mapboxgl.accessToken = 'pk.eyJ1IjoiYWxpZmRhcnNpbSIsImEiOiJjbTRjZ3djcmIwNTMxMmlxcGZvZWx1eTFqIn0.X3VV1PhXekp3_HAwoB6kbw';</td></tr><tr><td class="line-number" value="252"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="253"></td><td class="line-content">    // Initialize map with default center</td></tr><tr><td class="line-number" value="254"></td><td class="line-content">    const map = new mapboxgl.Map({</td></tr><tr><td class="line-number" value="255"></td><td class="line-content">        container: 'map',</td></tr><tr><td class="line-number" value="256"></td><td class="line-content">        style: 'mapbox://styles/mapbox/streets-v12',</td></tr><tr><td class="line-number" value="257"></td><td class="line-content">        center: [103.317818, 2.029433],</td></tr><tr><td class="line-number" value="258"></td><td class="line-content">        zoom: 8</td></tr><tr><td class="line-number" value="259"></td><td class="line-content">    });</td></tr><tr><td class="line-number" value="260"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="261"></td><td class="line-content">    // Wait for map to load before adding layers</td></tr><tr><td class="line-number" value="262"></td><td class="line-content">    map.on('load', () =&gt; {</td></tr><tr><td class="line-number" value="263"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="264"></td><td class="line-content">        // Load both bus stop and bus icons</td></tr><tr><td class="line-number" value="265"></td><td class="line-content">        Promise.all([</td></tr><tr><td class="line-number" value="266"></td><td class="line-content">            new Promise((resolve, reject) =&gt; {</td></tr><tr><td class="line-number" value="267"></td><td class="line-content">                map.loadImage(imageBusStop, (error, image) =&gt; {</td></tr><tr><td class="line-number" value="268"></td><td class="line-content">                    if (error) reject(error);</td></tr><tr><td class="line-number" value="269"></td><td class="line-content">                    map.addImage('bus-stop-icon', image);</td></tr><tr><td class="line-number" value="270"></td><td class="line-content">                    resolve();</td></tr><tr><td class="line-number" value="271"></td><td class="line-content">                });</td></tr><tr><td class="line-number" value="272"></td><td class="line-content">            }),</td></tr><tr><td class="line-number" value="273"></td><td class="line-content">            new Promise((resolve, reject) =&gt; {</td></tr><tr><td class="line-number" value="274"></td><td class="line-content">                map.loadImage(imageBus, (error, image) =&gt; {</td></tr><tr><td class="line-number" value="275"></td><td class="line-content">                    if (error) reject(error);</td></tr><tr><td class="line-number" value="276"></td><td class="line-content">                    map.addImage('bus-icon', image);</td></tr><tr><td class="line-number" value="277"></td><td class="line-content">                    resolve();</td></tr><tr><td class="line-number" value="278"></td><td class="line-content">                });</td></tr><tr><td class="line-number" value="279"></td><td class="line-content">            }),</td></tr><tr><td class="line-number" value="280"></td><td class="line-content">            new Promise((resolve, reject) =&gt; {</td></tr><tr><td class="line-number" value="281"></td><td class="line-content">                map.loadImage(imageArrows, (error, image) =&gt; {</td></tr><tr><td class="line-number" value="282"></td><td class="line-content">                    if (error) reject(error);</td></tr><tr><td class="line-number" value="283"></td><td class="line-content">                    map.addImage('arrow-icon', image);</td></tr><tr><td class="line-number" value="284"></td><td class="line-content">                    resolve();</td></tr><tr><td class="line-number" value="285"></td><td class="line-content">                });</td></tr><tr><td class="line-number" value="286"></td><td class="line-content">            })</td></tr><tr><td class="line-number" value="287"></td><td class="line-content">        ]).then(() =&gt; {</td></tr><tr><td class="line-number" value="288"></td><td class="line-content">            // Add the route source</td></tr><tr><td class="line-number" value="289"></td><td class="line-content">            map.addSource('route', {</td></tr><tr><td class="line-number" value="290"></td><td class="line-content">                'type': 'geojson',</td></tr><tr><td class="line-number" value="291"></td><td class="line-content">                'data': geojson</td></tr><tr><td class="line-number" value="292"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="293"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="294"></td><td class="line-content">            // Add the bus stops source</td></tr><tr><td class="line-number" value="295"></td><td class="line-content">            map.addSource('bus-stops', {</td></tr><tr><td class="line-number" value="296"></td><td class="line-content">                'type': 'geojson',</td></tr><tr><td class="line-number" value="297"></td><td class="line-content">                'data': poisGeoJSON</td></tr><tr><td class="line-number" value="298"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="299"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="300"></td><td class="line-content">            // Add the bus source</td></tr><tr><td class="line-number" value="301"></td><td class="line-content">            map.addSource('bus', {</td></tr><tr><td class="line-number" value="302"></td><td class="line-content">                'type': 'geojson',</td></tr><tr><td class="line-number" value="303"></td><td class="line-content">                'data': busGeoJSON</td></tr><tr><td class="line-number" value="304"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="305"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="306"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="307"></td><td class="line-content">            // Add the arrow layer</td></tr><tr><td class="line-number" value="308"></td><td class="line-content">            map.addLayer({</td></tr><tr><td class="line-number" value="309"></td><td class="line-content">                'id': 'route-arrows',</td></tr><tr><td class="line-number" value="310"></td><td class="line-content">                'type': 'symbol',</td></tr><tr><td class="line-number" value="311"></td><td class="line-content">                'source': 'route',</td></tr><tr><td class="line-number" value="312"></td><td class="line-content">                'layout': {</td></tr><tr><td class="line-number" value="313"></td><td class="line-content">                    'symbol-placement': 'line',</td></tr><tr><td class="line-number" value="314"></td><td class="line-content">                    'symbol-spacing': 25,</td></tr><tr><td class="line-number" value="315"></td><td class="line-content">                    'icon-image': 'arrow-icon',</td></tr><tr><td class="line-number" value="316"></td><td class="line-content">                    'icon-size': 0.3,</td></tr><tr><td class="line-number" value="317"></td><td class="line-content">                    'icon-allow-overlap': true,</td></tr><tr><td class="line-number" value="318"></td><td class="line-content">                    'icon-ignore-placement': true,</td></tr><tr><td class="line-number" value="319"></td><td class="line-content">                    'icon-rotation-alignment': 'map',</td></tr><tr><td class="line-number" value="320"></td><td class="line-content">                    'icon-pitch-alignment': 'map'</td></tr><tr><td class="line-number" value="321"></td><td class="line-content">                }</td></tr><tr><td class="line-number" value="322"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="323"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="324"></td><td class="line-content">            // Add the route layer</td></tr><tr><td class="line-number" value="325"></td><td class="line-content">            map.addLayer({</td></tr><tr><td class="line-number" value="326"></td><td class="line-content">                'id': 'route',</td></tr><tr><td class="line-number" value="327"></td><td class="line-content">                'type': 'line',</td></tr><tr><td class="line-number" value="328"></td><td class="line-content">                'source': 'route',</td></tr><tr><td class="line-number" value="329"></td><td class="line-content">                'layout': {</td></tr><tr><td class="line-number" value="330"></td><td class="line-content">                    'line-join': 'round',</td></tr><tr><td class="line-number" value="331"></td><td class="line-content">                    'line-cap': 'round'</td></tr><tr><td class="line-number" value="332"></td><td class="line-content">                },</td></tr><tr><td class="line-number" value="333"></td><td class="line-content">                'paint': {</td></tr><tr><td class="line-number" value="334"></td><td class="line-content">                    'line-color': '#ff0000',</td></tr><tr><td class="line-number" value="335"></td><td class="line-content">                    'line-width': 3</td></tr><tr><td class="line-number" value="336"></td><td class="line-content">                }</td></tr><tr><td class="line-number" value="337"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="338"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="339"></td><td class="line-content">            // Add the bus stops layer</td></tr><tr><td class="line-number" value="340"></td><td class="line-content">            map.addLayer({</td></tr><tr><td class="line-number" value="341"></td><td class="line-content">                'id': 'bus-stops',</td></tr><tr><td class="line-number" value="342"></td><td class="line-content">                'type': 'symbol',</td></tr><tr><td class="line-number" value="343"></td><td class="line-content">                'source': 'bus-stops',</td></tr><tr><td class="line-number" value="344"></td><td class="line-content">                'layout': {</td></tr><tr><td class="line-number" value="345"></td><td class="line-content">                    'icon-anchor': 'bottom',</td></tr><tr><td class="line-number" value="346"></td><td class="line-content">                    'icon-image': 'bus-stop-icon',</td></tr><tr><td class="line-number" value="347"></td><td class="line-content">                    'icon-size': [</td></tr><tr><td class="line-number" value="348"></td><td class="line-content">                        'interpolate',</td></tr><tr><td class="line-number" value="349"></td><td class="line-content">                        ['linear'],</td></tr><tr><td class="line-number" value="350"></td><td class="line-content">                        ['zoom'],</td></tr><tr><td class="line-number" value="351"></td><td class="line-content">                        10, 0.45,</td></tr><tr><td class="line-number" value="352"></td><td class="line-content">                        13, 0.55,</td></tr><tr><td class="line-number" value="353"></td><td class="line-content">                        16, 0.65</td></tr><tr><td class="line-number" value="354"></td><td class="line-content">                    ],</td></tr><tr><td class="line-number" value="355"></td><td class="line-content">                    'icon-allow-overlap': true,</td></tr><tr><td class="line-number" value="356"></td><td class="line-content">                    'text-field': ['get', 'name'],</td></tr><tr><td class="line-number" value="357"></td><td class="line-content">                    'text-size': 11.5,</td></tr><tr><td class="line-number" value="358"></td><td class="line-content">                    'text-offset': [0, -1.8],</td></tr><tr><td class="line-number" value="359"></td><td class="line-content">                    'text-anchor': 'bottom',</td></tr><tr><td class="line-number" value="360"></td><td class="line-content">                    'text-optional': true,</td></tr><tr><td class="line-number" value="361"></td><td class="line-content">                    'text-font': ['Arial Unicode MS Bold'],</td></tr><tr><td class="line-number" value="362"></td><td class="line-content">                },</td></tr><tr><td class="line-number" value="363"></td><td class="line-content">                'paint': {</td></tr><tr><td class="line-number" value="364"></td><td class="line-content">                    'text-halo-color': '#ffffff',</td></tr><tr><td class="line-number" value="365"></td><td class="line-content">                    'text-halo-width': 1,</td></tr><tr><td class="line-number" value="366"></td><td class="line-content">                    'text-color': '#6884D9',</td></tr><tr><td class="line-number" value="367"></td><td class="line-content">                }</td></tr><tr><td class="line-number" value="368"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="369"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="370"></td><td class="line-content">            // Add the bus layer</td></tr><tr><td class="line-number" value="371"></td><td class="line-content">            map.addLayer({</td></tr><tr><td class="line-number" value="372"></td><td class="line-content">                'id': 'bus',</td></tr><tr><td class="line-number" value="373"></td><td class="line-content">                'type': 'symbol',</td></tr><tr><td class="line-number" value="374"></td><td class="line-content">                'source': 'bus',</td></tr><tr><td class="line-number" value="375"></td><td class="line-content">                'layout': {</td></tr><tr><td class="line-number" value="376"></td><td class="line-content">                    'icon-anchor': 'bottom',</td></tr><tr><td class="line-number" value="377"></td><td class="line-content">                    'icon-image': 'bus-icon',</td></tr><tr><td class="line-number" value="378"></td><td class="line-content">                    'icon-size': [</td></tr><tr><td class="line-number" value="379"></td><td class="line-content">                        'interpolate',</td></tr><tr><td class="line-number" value="380"></td><td class="line-content">                        ['linear'],</td></tr><tr><td class="line-number" value="381"></td><td class="line-content">                        ['zoom'],</td></tr><tr><td class="line-number" value="382"></td><td class="line-content">                        10, 0.65,</td></tr><tr><td class="line-number" value="383"></td><td class="line-content">                        13, 0.75,</td></tr><tr><td class="line-number" value="384"></td><td class="line-content">                        16, 0.85</td></tr><tr><td class="line-number" value="385"></td><td class="line-content">                    ],</td></tr><tr><td class="line-number" value="386"></td><td class="line-content">                    'icon-allow-overlap': true,</td></tr><tr><td class="line-number" value="387"></td><td class="line-content">                    'text-field': ['get', 'busId'],</td></tr><tr><td class="line-number" value="388"></td><td class="line-content">                    'text-size': 12,</td></tr><tr><td class="line-number" value="389"></td><td class="line-content">                    'text-offset': [0, -2.1],</td></tr><tr><td class="line-number" value="390"></td><td class="line-content">                    'text-anchor': 'bottom',</td></tr><tr><td class="line-number" value="391"></td><td class="line-content">                    'text-optional': true,</td></tr><tr><td class="line-number" value="392"></td><td class="line-content">                    'text-font': ['Arial Unicode MS Bold']</td></tr><tr><td class="line-number" value="393"></td><td class="line-content">                },</td></tr><tr><td class="line-number" value="394"></td><td class="line-content">                'paint': {</td></tr><tr><td class="line-number" value="395"></td><td class="line-content">                    'text-halo-color': '#ffffff',</td></tr><tr><td class="line-number" value="396"></td><td class="line-content">                    'text-halo-width': 1,</td></tr><tr><td class="line-number" value="397"></td><td class="line-content">                    'text-color': '#ff3c00'</td></tr><tr><td class="line-number" value="398"></td><td class="line-content">                }</td></tr><tr><td class="line-number" value="399"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="400"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="401"></td><td class="line-content">            // Add popup on click for buses</td></tr><tr><td class="line-number" value="402"></td><td class="line-content">            map.on('click', 'bus', (e) =&gt; {</td></tr><tr><td class="line-number" value="403"></td><td class="line-content">                const coordinates = e.features[0].geometry.coordinates.slice();</td></tr><tr><td class="line-number" value="404"></td><td class="line-content">                const busId = e.features[0].properties.busId;</td></tr><tr><td class="line-number" value="405"></td><td class="line-content">                const lastUpdate = new Date(e.features[0].properties.lastUpdate).toLocaleString();</td></tr><tr><td class="line-number" value="406"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="407"></td><td class="line-content">                new mapboxgl.Popup({</td></tr><tr><td class="line-number" value="408"></td><td class="line-content">                    anchor: 'bottom',</td></tr><tr><td class="line-number" value="409"></td><td class="line-content">                    offset: [0, -40]</td></tr><tr><td class="line-number" value="410"></td><td class="line-content">                })</td></tr><tr><td class="line-number" value="411"></td><td class="line-content">                    .setLngLat(coordinates)</td></tr><tr><td class="line-number" value="412"></td><td class="line-content">                    .setHTML(`</td></tr><tr><td class="line-number" value="413"></td><td class="line-content">                        &lt;p class="bus-stop-name"&gt;Bus ${busId}&lt;/p&gt;</td></tr><tr><td class="line-number" value="414"></td><td class="line-content">                        &lt;p style="margin: 5px 0 0 0; font-size: 12px;"&gt;Update: ${lastUpdate}&lt;/p&gt;</td></tr><tr><td class="line-number" value="415"></td><td class="line-content">                    `)</td></tr><tr><td class="line-number" value="416"></td><td class="line-content">                    .addTo(map);</td></tr><tr><td class="line-number" value="417"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="418"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="419"></td><td class="line-content">            // Change cursor on hover for buses</td></tr><tr><td class="line-number" value="420"></td><td class="line-content">            map.on('mouseenter', 'bus', () =&gt; {</td></tr><tr><td class="line-number" value="421"></td><td class="line-content">                map.getCanvas().style.cursor = 'pointer';</td></tr><tr><td class="line-number" value="422"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="423"></td><td class="line-content">            map.on('mouseleave', 'bus', () =&gt; {</td></tr><tr><td class="line-number" value="424"></td><td class="line-content">                map.getCanvas().style.cursor = '';</td></tr><tr><td class="line-number" value="425"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="426"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="427"></td><td class="line-content">            // Add popup on click for bus stops</td></tr><tr><td class="line-number" value="428"></td><td class="line-content">            map.on('click', 'bus-stops', (e) =&gt; {</td></tr><tr><td class="line-number" value="429"></td><td class="line-content">                const coordinates = e.features[0].geometry.coordinates.slice();</td></tr><tr><td class="line-number" value="430"></td><td class="line-content">                const name = e.features[0].properties.name;</td></tr><tr><td class="line-number" value="431"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="432"></td><td class="line-content">                new mapboxgl.Popup()</td></tr><tr><td class="line-number" value="433"></td><td class="line-content">                    .setLngLat(coordinates)</td></tr><tr><td class="line-number" value="434"></td><td class="line-content">                    .setHTML(`&lt;p class="bus-stop-name"&gt;${name}&lt;/p&gt;`)</td></tr><tr><td class="line-number" value="435"></td><td class="line-content">                    .addTo(map);</td></tr><tr><td class="line-number" value="436"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="437"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="438"></td><td class="line-content">            // Change cursor on hover for bus stops</td></tr><tr><td class="line-number" value="439"></td><td class="line-content">            map.on('mouseenter', 'bus-stops', () =&gt; {</td></tr><tr><td class="line-number" value="440"></td><td class="line-content">                map.getCanvas().style.cursor = 'pointer';</td></tr><tr><td class="line-number" value="441"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="442"></td><td class="line-content">            map.on('mouseleave', 'bus-stops', () =&gt; {</td></tr><tr><td class="line-number" value="443"></td><td class="line-content">                map.getCanvas().style.cursor = '';</td></tr><tr><td class="line-number" value="444"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="445"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="446"></td><td class="line-content">            // Get the bounds of all features</td></tr><tr><td class="line-number" value="447"></td><td class="line-content">            const coordinates = geojson.features[0].geometry.coordinates;</td></tr><tr><td class="line-number" value="448"></td><td class="line-content">            const bounds = coordinates.reduce((bounds, coord) =&gt; {</td></tr><tr><td class="line-number" value="449"></td><td class="line-content">                return bounds.extend(coord);</td></tr><tr><td class="line-number" value="450"></td><td class="line-content">            }, new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));</td></tr><tr><td class="line-number" value="451"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="452"></td><td class="line-content">            // Extend bounds to include POIs</td></tr><tr><td class="line-number" value="453"></td><td class="line-content">            pois.forEach(poi =&gt; {</td></tr><tr><td class="line-number" value="454"></td><td class="line-content">                bounds.extend([parseFloat(poi.lng), parseFloat(poi.lat)]);</td></tr><tr><td class="line-number" value="455"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="456"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="457"></td><td class="line-content">            // Fit the map to the route with padding</td></tr><tr><td class="line-number" value="458"></td><td class="line-content">            map.fitBounds(bounds, {</td></tr><tr><td class="line-number" value="459"></td><td class="line-content">                padding: 50,</td></tr><tr><td class="line-number" value="460"></td><td class="line-content">                duration: 1000</td></tr><tr><td class="line-number" value="461"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="462"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="463"></td><td class="line-content">        }).catch(error =&gt; console.error('Error loading images:', error));</td></tr><tr><td class="line-number" value="464"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="465"></td><td class="line-content">        updateBusLocation();</td></tr><tr><td class="line-number" value="466"></td><td class="line-content">    });</td></tr><tr><td class="line-number" value="467"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="468"></td><td class="line-content">    // Function to fetch and update bus location</td></tr><tr><td class="line-number" value="469"></td><td class="line-content">    function updateBusLocation() {</td></tr><tr><td class="line-number" value="470"></td><td class="line-content">        $.ajax({</td></tr><tr><td class="line-number" value="471"></td><td class="line-content">            url: `https://live.paj.com.my/get/KL003`,</td></tr><tr><td class="line-number" value="472"></td><td class="line-content">            method: 'get',</td></tr><tr><td class="line-number" value="473"></td><td class="line-content">            cache: false,</td></tr><tr><td class="line-number" value="474"></td><td class="line-content">            dataType: "json",</td></tr><tr><td class="line-number" value="475"></td><td class="line-content">            success: function(result) {</td></tr><tr><td class="line-number" value="476"></td><td class="line-content">                if (result.success) {</td></tr><tr><td class="line-number" value="477"></td><td class="line-content">                    let arrayData = Object.values(result.data);</td></tr><tr><td class="line-number" value="478"></td><td class="line-content">                    // Update bus positions in GeoJSON</td></tr><tr><td class="line-number" value="479"></td><td class="line-content">                    const newBusGeoJSON = {</td></tr><tr><td class="line-number" value="480"></td><td class="line-content">                        type: 'FeatureCollection',</td></tr><tr><td class="line-number" value="481"></td><td class="line-content">                        features: arrayData.map(bus =&gt; ({</td></tr><tr><td class="line-number" value="482"></td><td class="line-content">                            type: 'Feature',</td></tr><tr><td class="line-number" value="483"></td><td class="line-content">                            geometry: {</td></tr><tr><td class="line-number" value="484"></td><td class="line-content">                                type: 'Point',</td></tr><tr><td class="line-number" value="485"></td><td class="line-content">                                coordinates: [bus.lng, bus.lat]</td></tr><tr><td class="line-number" value="486"></td><td class="line-content">                            },</td></tr><tr><td class="line-number" value="487"></td><td class="line-content">                            properties: {</td></tr><tr><td class="line-number" value="488"></td><td class="line-content">                                busId: bus.bus,</td></tr><tr><td class="line-number" value="489"></td><td class="line-content">                                title: `Bus ${bus.bus}`,</td></tr><tr><td class="line-number" value="490"></td><td class="line-content">                                lastUpdate: bus.time</td></tr><tr><td class="line-number" value="491"></td><td class="line-content">                            }</td></tr><tr><td class="line-number" value="492"></td><td class="line-content">                        }))</td></tr><tr><td class="line-number" value="493"></td><td class="line-content">                    };</td></tr><tr><td class="line-number" value="494"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="495"></td><td class="line-content">                    try {</td></tr><tr><td class="line-number" value="496"></td><td class="line-content">                        map.getSource('bus').setData(newBusGeoJSON);</td></tr><tr><td class="line-number" value="497"></td><td class="line-content">                        // Update the sliding cards</td></tr><tr><td class="line-number" value="498"></td><td class="line-content">                        updateBusCards(arrayData);</td></tr><tr><td class="line-number" value="499"></td><td class="line-content">                    } catch (e) {</td></tr><tr><td class="line-number" value="500"></td><td class="line-content">                        // console.error('Error updating map:', e);</td></tr><tr><td class="line-number" value="501"></td><td class="line-content">                    }</td></tr><tr><td class="line-number" value="502"></td><td class="line-content">                } else {</td></tr><tr><td class="line-number" value="503"></td><td class="line-content">                    // console.log('Error:', result.message);</td></tr><tr><td class="line-number" value="504"></td><td class="line-content">                }</td></tr><tr><td class="line-number" value="505"></td><td class="line-content">            }</td></tr><tr><td class="line-number" value="506"></td><td class="line-content">        });</td></tr><tr><td class="line-number" value="507"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="508"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="509"></td><td class="line-content">    // Function to update bus cards</td></tr><tr><td class="line-number" value="510"></td><td class="line-content">    function updateBusCards(busData) {</td></tr><tr><td class="line-number" value="511"></td><td class="line-content">        const busCardsContainer = document.getElementById('busCards');</td></tr><tr><td class="line-number" value="512"></td><td class="line-content">        busCardsContainer.innerHTML = ''; // Clear existing cards</td></tr><tr><td class="line-number" value="513"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="514"></td><td class="line-content">        if (busData.length &lt; 3) {</td></tr><tr><td class="line-number" value="515"></td><td class="line-content">            // Center the container for a single bus</td></tr><tr><td class="line-number" value="516"></td><td class="line-content">            busCardsContainer.style.display = 'flex';</td></tr><tr><td class="line-number" value="517"></td><td class="line-content">            busCardsContainer.style.justifyContent = 'center';</td></tr><tr><td class="line-number" value="518"></td><td class="line-content">        } else {</td></tr><tr><td class="line-number" value="519"></td><td class="line-content">            // Restore default styles for multiple buses</td></tr><tr><td class="line-number" value="520"></td><td class="line-content">            busCardsContainer.style.display = 'block';</td></tr><tr><td class="line-number" value="521"></td><td class="line-content">            busCardsContainer.style.justifyContent = ''; // Clear the justifyContent</td></tr><tr><td class="line-number" value="522"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="523"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="524"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="525"></td><td class="line-content">        busData.forEach(bus =&gt; {</td></tr><tr><td class="line-number" value="526"></td><td class="line-content">            const card = document.createElement('div');</td></tr><tr><td class="line-number" value="527"></td><td class="line-content">            card.className = 'bus-card';</td></tr><tr><td class="line-number" value="528"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="529"></td><td class="line-content">            // Check if the last update is within the last 30 minutes</td></tr><tr><td class="line-number" value="530"></td><td class="line-content">            const lastUpdateTime = new Date(bus.time);</td></tr><tr><td class="line-number" value="531"></td><td class="line-content">            // const timeDifferenceInMinutes = (currentTime - lastUpdateTime) / (1000 * 60);</td></tr><tr><td class="line-number" value="532"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="533"></td><td class="line-content">            // if (timeDifferenceInMinutes &lt;= 30) {</td></tr><tr><td class="line-number" value="534"></td><td class="line-content">            //     card.style.background = 'rgb(20,192,80)'; // Light green background</td></tr><tr><td class="line-number" value="535"></td><td class="line-content">            // }</td></tr><tr><td class="line-number" value="536"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="537"></td><td class="line-content">            card.onclick = () =&gt; {</td></tr><tr><td class="line-number" value="538"></td><td class="line-content">                // Remove active class from all cards</td></tr><tr><td class="line-number" value="539"></td><td class="line-content">                document.querySelectorAll('.bus-card').forEach(c =&gt; c.classList.remove('active'));</td></tr><tr><td class="line-number" value="540"></td><td class="line-content">                // Add active class to clicked card</td></tr><tr><td class="line-number" value="541"></td><td class="line-content">                card.classList.add('active');</td></tr><tr><td class="line-number" value="542"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="543"></td><td class="line-content">                // Fly to bus location</td></tr><tr><td class="line-number" value="544"></td><td class="line-content">                map.flyTo({</td></tr><tr><td class="line-number" value="545"></td><td class="line-content">                    center: [bus.lng, bus.lat],</td></tr><tr><td class="line-number" value="546"></td><td class="line-content">                    zoom: 15,</td></tr><tr><td class="line-number" value="547"></td><td class="line-content">                    duration: 1000</td></tr><tr><td class="line-number" value="548"></td><td class="line-content">                });</td></tr><tr><td class="line-number" value="549"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="550"></td><td class="line-content">                // Show popup for the bus</td></tr><tr><td class="line-number" value="551"></td><td class="line-content">                new mapboxgl.Popup({</td></tr><tr><td class="line-number" value="552"></td><td class="line-content">                    anchor: 'bottom',</td></tr><tr><td class="line-number" value="553"></td><td class="line-content">                    offset: [0, -40]</td></tr><tr><td class="line-number" value="554"></td><td class="line-content">                })</td></tr><tr><td class="line-number" value="555"></td><td class="line-content">                    .setLngLat([bus.lng, bus.lat])</td></tr><tr><td class="line-number" value="556"></td><td class="line-content">                    .setHTML(`</td></tr><tr><td class="line-number" value="557"></td><td class="line-content">                    &lt;p class="bus-stop-name"&gt;Bus ${bus.bus}&lt;/p&gt;</td></tr><tr><td class="line-number" value="558"></td><td class="line-content">                    &lt;p style="margin: 0 0 0 0; font-size: 12px;"&gt;Update: ${lastUpdateTime.toLocaleString()}&lt;/p&gt;</td></tr><tr><td class="line-number" value="559"></td><td class="line-content">                `)</td></tr><tr><td class="line-number" value="560"></td><td class="line-content">                    .addTo(map);</td></tr><tr><td class="line-number" value="561"></td><td class="line-content">            };</td></tr><tr><td class="line-number" value="562"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="563"></td><td class="line-content">            let time = new Date(bus.time);</td></tr><tr><td class="line-number" value="564"></td><td class="line-content">            let now = new Date();</td></tr><tr><td class="line-number" value="565"></td><td class="line-content">            let timeDifference = (now - time) / (1000 * 60); // Difference in minutes</td></tr><tr><td class="line-number" value="566"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="567"></td><td class="line-content">            let onlineStat = '';</td></tr><tr><td class="line-number" value="568"></td><td class="line-content">            // Apply green background if less than 30 minutes</td></tr><tr><td class="line-number" value="569"></td><td class="line-content">            if (timeDifference &lt; 30) {</td></tr><tr><td class="line-number" value="570"></td><td class="line-content">                // add a class to the card</td></tr><tr><td class="line-number" value="571"></td><td class="line-content">                onlineStat = `&lt;i class="fa-solid fa-signal-stream mt-1 fs-2 online" style="color: #0fa354 !important;"&gt;&lt;/i&gt;`;</td></tr><tr><td class="line-number" value="572"></td><td class="line-content">                card.classList.add('online');</td></tr><tr><td class="line-number" value="573"></td><td class="line-content">                card.classList.remove('offline');</td></tr><tr><td class="line-number" value="574"></td><td class="line-content">            }</td></tr><tr><td class="line-number" value="575"></td><td class="line-content">            else {</td></tr><tr><td class="line-number" value="576"></td><td class="line-content">                // remove the class</td></tr><tr><td class="line-number" value="577"></td><td class="line-content">                onlineStat = `&lt;i class="fa-solid fa-signal-stream-slash mt-1 fs-2 offline" style="color: #ff274f !important;"&gt;&lt;/i&gt;`;</td></tr><tr><td class="line-number" value="578"></td><td class="line-content">                card.classList.remove('online');</td></tr><tr><td class="line-number" value="579"></td><td class="line-content">                card.classList.add('offline');</td></tr><tr><td class="line-number" value="580"></td><td class="line-content">            }</td></tr><tr><td class="line-number" value="581"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="582"></td><td class="line-content">            // Format time as dd/mm/yyyy hh:mm:ss AM/PM</td></tr><tr><td class="line-number" value="583"></td><td class="line-content">            let timeString = time.toLocaleString('en-GB', {hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true});</td></tr><tr><td class="line-number" value="584"></td><td class="line-content">            card.innerHTML = `</td></tr><tr><td class="line-number" value="585"></td><td class="line-content">                &lt;div class="d-flex justify-content-between"&gt;</td></tr><tr><td class="line-number" value="586"></td><td class="line-content">                    &lt;div class="d-flex"&gt;</td></tr><tr><td class="line-number" value="587"></td><td class="line-content">                        &lt;div class="legend-icon me-1" style="background-image: url(https://live.paj.com.my/assets/bus-marker.png)"&gt;&lt;/div&gt;</td></tr><tr><td class="line-number" value="588"></td><td class="line-content">                        &lt;p class="bus-id mb-0 fs-4 fw-bold"&gt;${bus.bus}&lt;/p&gt;</td></tr><tr><td class="line-number" value="589"></td><td class="line-content">                    &lt;/div&gt;</td></tr><tr><td class="line-number" value="590"></td><td class="line-content">                    ${onlineStat}</td></tr><tr><td class="line-number" value="591"></td><td class="line-content">                &lt;/div&gt;</td></tr><tr><td class="line-number" value="592"></td><td class="line-content">                &lt;p class="last-update fs-7 fw-bold"&gt;&lt;i class="fa-solid fa-clock ms-1 me-2 text-primary"&gt;&lt;/i&gt;${timeString.toUpperCase()}&lt;/p&gt;</td></tr><tr><td class="line-number" value="593"></td><td class="line-content">            `;</td></tr><tr><td class="line-number" value="594"></td><td class="line-content">            busCardsContainer.appendChild(card);</td></tr><tr><td class="line-number" value="595"></td><td class="line-content">        });</td></tr><tr><td class="line-number" value="596"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="597"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="598"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="599"></td><td class="line-content">    // interval to update bus location</td></tr><tr><td class="line-number" value="600"></td><td class="line-content">    setInterval(updateBusLocation, 10000);</td></tr><tr><td class="line-number" value="601"></td><td class="line-content"><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="602"></td><td class="line-content"><span class="html-tag">&lt;/body&gt;</span></td></tr><tr><td class="line-number" value="603"></td><td class="line-content"><span class="html-tag">&lt;/html&gt;</span></td></tr><tr><td class="line-number" value="604"></td><td class="line-content"><span class="html-end-of-file"></span></td></tr></tbody></table></body></html>