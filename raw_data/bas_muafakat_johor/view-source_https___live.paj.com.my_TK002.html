
<!-- saved from url=(0029)https://live.paj.com.my/TK002 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="color-scheme" content="light dark"></head><body><div class="line-gutter-backdrop"></div><form autocomplete="off"><label class="line-wrap-control">Line wrap<input type="checkbox" aria-label="Line wrap"></label></form><table><tbody><tr><td class="line-number" value="1"></td><td class="line-content"><span class="html-doctype">&lt;!DOCTYPE html&gt;</span></td></tr><tr><td class="line-number" value="2"></td><td class="line-content"><span class="html-tag">&lt;html <span class="html-attribute-name">lang</span>="<span class="html-attribute-value">en</span>"&gt;</span></td></tr><tr><td class="line-number" value="3"></td><td class="line-content"><span class="html-tag">&lt;head&gt;</span></td></tr><tr><td class="line-number" value="4"></td><td class="line-content">    <span class="html-tag">&lt;title&gt;</span>Jejak Kedudukan Bas Muafakat Johor<span class="html-tag">&lt;/title&gt;</span></td></tr><tr><td class="line-number" value="5"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">charset</span>="<span class="html-attribute-value">UTF-8</span>"&gt;</span></td></tr><tr><td class="line-number" value="6"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">name</span>="<span class="html-attribute-value">viewport</span>" <span class="html-attribute-name">content</span>="<span class="html-attribute-value">width=device-width, initial-scale=1.0</span>"&gt;</span></td></tr><tr><td class="line-number" value="7"></td><td class="line-content">    <span class="html-tag">&lt;meta <span class="html-attribute-name">name</span>="<span class="html-attribute-value">description</span>" <span class="html-attribute-name">content</span>="<span class="html-attribute-value">Jejak Kedudukan Bas Muafakat Johor</span>"/&gt;</span></td></tr><tr><td class="line-number" value="8"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">shortcut icon</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://live.paj.com.my/assets/logo-paj.png" rel="noreferrer noopener">/assets/logo-paj.png</a>"/&gt;</span></td></tr><tr><td class="line-number" value="9"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.css" rel="noreferrer noopener">https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.css</a>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>"&gt;</span></td></tr><tr><td class="line-number" value="10"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://live.paj.com.my/assets/plugins/global/plugins.bundle.css" rel="noreferrer noopener">/assets/plugins/global/plugins.bundle.css</a>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>" <span class="html-attribute-name">type</span>="<span class="html-attribute-value">text/css</span>"/&gt;</span></td></tr><tr><td class="line-number" value="11"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://live.paj.com.my/assets/css/style.bundle.css" rel="noreferrer noopener">/assets/css/style.bundle.css</a>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>" <span class="html-attribute-name">type</span>="<span class="html-attribute-value">text/css</span>"/&gt;</span></td></tr><tr><td class="line-number" value="12"></td><td class="line-content">    <span class="html-tag">&lt;link <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://site-assets.fontawesome.com/releases/v6.7.2/css/all.css" rel="noreferrer noopener">https://site-assets.fontawesome.com/releases/v6.7.2/css/all.css</a>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">stylesheet</span>"&gt;</span></td></tr><tr><td class="line-number" value="13"></td><td class="line-content">    <span class="html-tag">&lt;style&gt;</span></td></tr><tr><td class="line-number" value="14"></td><td class="line-content">        body {</td></tr><tr><td class="line-number" value="15"></td><td class="line-content">            margin: 0;</td></tr><tr><td class="line-number" value="16"></td><td class="line-content">            padding: 0;</td></tr><tr><td class="line-number" value="17"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="18"></td><td class="line-content">        #map {</td></tr><tr><td class="line-number" value="19"></td><td class="line-content">            position: absolute;</td></tr><tr><td class="line-number" value="20"></td><td class="line-content">            top: 0;</td></tr><tr><td class="line-number" value="21"></td><td class="line-content">            bottom: 0;</td></tr><tr><td class="line-number" value="22"></td><td class="line-content">            width: 100%;</td></tr><tr><td class="line-number" value="23"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="24"></td><td class="line-content">        .legend-card {</td></tr><tr><td class="line-number" value="25"></td><td class="line-content">            position: absolute;</td></tr><tr><td class="line-number" value="26"></td><td class="line-content">            top: 10px;</td></tr><tr><td class="line-number" value="27"></td><td class="line-content">            right: 10px;</td></tr><tr><td class="line-number" value="28"></td><td class="line-content">            background: white;</td></tr><tr><td class="line-number" value="29"></td><td class="line-content">            padding: 15px;</td></tr><tr><td class="line-number" value="30"></td><td class="line-content">            padding-top: 3px;</td></tr><tr><td class="line-number" value="31"></td><td class="line-content">            border-radius: 8px;</td></tr><tr><td class="line-number" value="32"></td><td class="line-content">            box-shadow: 0 2px 4px rgba(0,0,0,0.1);</td></tr><tr><td class="line-number" value="33"></td><td class="line-content">            z-index: 1;</td></tr><tr><td class="line-number" value="34"></td><td class="line-content">            max-width: 200px;</td></tr><tr><td class="line-number" value="35"></td><td class="line-content">            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;</td></tr><tr><td class="line-number" value="36"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="37"></td><td class="line-content">        .legend-title {</td></tr><tr><td class="line-number" value="38"></td><td class="line-content">            font-weight: 600;</td></tr><tr><td class="line-number" value="39"></td><td class="line-content">            font-size: 14px;</td></tr><tr><td class="line-number" value="40"></td><td class="line-content">            margin: 0 0 10px 0;</td></tr><tr><td class="line-number" value="41"></td><td class="line-content">            color: #333;</td></tr><tr><td class="line-number" value="42"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="43"></td><td class="line-content">        .legend-item {</td></tr><tr><td class="line-number" value="44"></td><td class="line-content">            display: flex;</td></tr><tr><td class="line-number" value="45"></td><td class="line-content">            align-items: center;</td></tr><tr><td class="line-number" value="46"></td><td class="line-content">            margin-bottom: 8px;</td></tr><tr><td class="line-number" value="47"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="48"></td><td class="line-content">        .legend-item:last-child {</td></tr><tr><td class="line-number" value="49"></td><td class="line-content">            margin-bottom: 0;</td></tr><tr><td class="line-number" value="50"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="51"></td><td class="line-content">        .legend-icon {</td></tr><tr><td class="line-number" value="52"></td><td class="line-content">            width: 20px;</td></tr><tr><td class="line-number" value="53"></td><td class="line-content">            height: 20px;</td></tr><tr><td class="line-number" value="54"></td><td class="line-content">            margin-right: 8px;</td></tr><tr><td class="line-number" value="55"></td><td class="line-content">            background-size: contain;</td></tr><tr><td class="line-number" value="56"></td><td class="line-content">            background-repeat: no-repeat;</td></tr><tr><td class="line-number" value="57"></td><td class="line-content">            background-position: center;</td></tr><tr><td class="line-number" value="58"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="59"></td><td class="line-content">        .legend-text {</td></tr><tr><td class="line-number" value="60"></td><td class="line-content">            font-size: 12px;</td></tr><tr><td class="line-number" value="61"></td><td class="line-content">            color: #666;</td></tr><tr><td class="line-number" value="62"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="63"></td><td class="line-content">        .legend-route {</td></tr><tr><td class="line-number" value="64"></td><td class="line-content">            background-color: #ff0000;</td></tr><tr><td class="line-number" value="65"></td><td class="line-content">            width: 20px;</td></tr><tr><td class="line-number" value="66"></td><td class="line-content">            height: 3px;</td></tr><tr><td class="line-number" value="67"></td><td class="line-content">            margin-right: 8px;</td></tr><tr><td class="line-number" value="68"></td><td class="line-content">            border-radius: 2px;</td></tr><tr><td class="line-number" value="69"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="70"></td><td class="line-content">        .mapboxgl-popup-content {</td></tr><tr><td class="line-number" value="71"></td><td class="line-content">            padding: 15px;</td></tr><tr><td class="line-number" value="72"></td><td class="line-content">            border-radius: 8px;</td></tr><tr><td class="line-number" value="73"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="74"></td><td class="line-content">        .bus-stop-name {</td></tr><tr><td class="line-number" value="75"></td><td class="line-content">            font-weight: bold;</td></tr><tr><td class="line-number" value="76"></td><td class="line-content">            margin: 0;</td></tr><tr><td class="line-number" value="77"></td><td class="line-content">            color: #333;</td></tr><tr><td class="line-number" value="78"></td><td class="line-content">            font-size: 14px;</td></tr><tr><td class="line-number" value="79"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="80"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="81"></td><td class="line-content">        /* New styles for the sliding cards */</td></tr><tr><td class="line-number" value="82"></td><td class="line-content">        .bus-cards-container {</td></tr><tr><td class="line-number" value="83"></td><td class="line-content">            position: fixed;</td></tr><tr><td class="line-number" value="84"></td><td class="line-content">            bottom: 30px;</td></tr><tr><td class="line-number" value="85"></td><td class="line-content">            left: 50%;</td></tr><tr><td class="line-number" value="86"></td><td class="line-content">            transform: translateX(-50%);</td></tr><tr><td class="line-number" value="87"></td><td class="line-content">            /*height: 50px;*/</td></tr><tr><td class="line-number" value="88"></td><td class="line-content">            background: transparent;</td></tr><tr><td class="line-number" value="89"></td><td class="line-content">            overflow-x: auto;</td></tr><tr><td class="line-number" value="90"></td><td class="line-content">            white-space: nowrap;</td></tr><tr><td class="line-number" value="91"></td><td class="line-content">            padding-top: 10px;</td></tr><tr><td class="line-number" value="92"></td><td class="line-content">            padding-bottom: 10px;</td></tr><tr><td class="line-number" value="93"></td><td class="line-content">            padding-left: 10px;</td></tr><tr><td class="line-number" value="94"></td><td class="line-content">            /*padding-bottom: 10px;*/</td></tr><tr><td class="line-number" value="95"></td><td class="line-content">            scrollbar-width: none; /* Firefox */</td></tr><tr><td class="line-number" value="96"></td><td class="line-content">            -ms-overflow-style: none; /* IE and Edge */</td></tr><tr><td class="line-number" value="97"></td><td class="line-content">            z-index: 1000;</td></tr><tr><td class="line-number" value="98"></td><td class="line-content">            width: 100%;</td></tr><tr><td class="line-number" value="99"></td><td class="line-content">            max-width: 1200px;</td></tr><tr><td class="line-number" value="100"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="101"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="102"></td><td class="line-content">        /*.bus-cards-container::-webkit-scrollbar {*/</td></tr><tr><td class="line-number" value="103"></td><td class="line-content">        /*    display: none; !* Chrome, Safari, Opera *!*/</td></tr><tr><td class="line-number" value="104"></td><td class="line-content">        /*}*/</td></tr><tr><td class="line-number" value="105"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="106"></td><td class="line-content">        .bus-card {</td></tr><tr><td class="line-number" value="107"></td><td class="line-content">            display: inline-block;</td></tr><tr><td class="line-number" value="108"></td><td class="line-content">            width: 160px;</td></tr><tr><td class="line-number" value="109"></td><td class="line-content">            height: 60px;</td></tr><tr><td class="line-number" value="110"></td><td class="line-content">            margin-right: 10px;</td></tr><tr><td class="line-number" value="111"></td><td class="line-content">            background: rgba(255, 255, 255, 0.9);</td></tr><tr><td class="line-number" value="112"></td><td class="line-content">            border-radius: 8px;</td></tr><tr><td class="line-number" value="113"></td><td class="line-content">            padding: 10px;</td></tr><tr><td class="line-number" value="114"></td><td class="line-content">            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);</td></tr><tr><td class="line-number" value="115"></td><td class="line-content">            vertical-align: top;</td></tr><tr><td class="line-number" value="116"></td><td class="line-content">            cursor: pointer;</td></tr><tr><td class="line-number" value="117"></td><td class="line-content">            transition: all 0.2s ease;</td></tr><tr><td class="line-number" value="118"></td><td class="line-content">            backdrop-filter: blur(5px);</td></tr><tr><td class="line-number" value="119"></td><td class="line-content">            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; /* Add this line */</td></tr><tr><td class="line-number" value="120"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="121"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="122"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="123"></td><td class="line-content">        .bus-card:hover {</td></tr><tr><td class="line-number" value="124"></td><td class="line-content">            transform: translateY(-2px);</td></tr><tr><td class="line-number" value="125"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="126"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="127"></td><td class="line-content">        .bus-card.active {</td></tr><tr><td class="line-number" value="128"></td><td class="line-content">            background: #e3f2fd;</td></tr><tr><td class="line-number" value="129"></td><td class="line-content">            border: 2px solid #2196f3;</td></tr><tr><td class="line-number" value="130"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="131"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="132"></td><td class="line-content">        .bus-id {</td></tr><tr><td class="line-number" value="133"></td><td class="line-content">            /*font-weight: bold;*/</td></tr><tr><td class="line-number" value="134"></td><td class="line-content">            /*font-size: 16px;*/</td></tr><tr><td class="line-number" value="135"></td><td class="line-content">            color: #434343;</td></tr><tr><td class="line-number" value="136"></td><td class="line-content">            margin: 0 0 5px 0;</td></tr><tr><td class="line-number" value="137"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="138"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="139"></td><td class="line-content">        .last-update {</td></tr><tr><td class="line-number" value="140"></td><td class="line-content">            font-size: 12px;</td></tr><tr><td class="line-number" value="141"></td><td class="line-content">            color: #666;</td></tr><tr><td class="line-number" value="142"></td><td class="line-content">            margin: 0;</td></tr><tr><td class="line-number" value="143"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="144"></td><td class="line-content">        .online {</td></tr><tr><td class="line-number" value="145"></td><td class="line-content">            /*background: #0fa354;*/</td></tr><tr><td class="line-number" value="146"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="147"></td><td class="line-content">        .offline {</td></tr><tr><td class="line-number" value="148"></td><td class="line-content">            background: #dadada;</td></tr><tr><td class="line-number" value="149"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="150"></td><td class="line-content">        /*.logo-container img {*/</td></tr><tr><td class="line-number" value="151"></td><td class="line-content">        /*    height: 40px;*/</td></tr><tr><td class="line-number" value="152"></td><td class="line-content">        /*    width: auto;*/</td></tr><tr><td class="line-number" value="153"></td><td class="line-content">        /*}*/</td></tr><tr><td class="line-number" value="154"></td><td class="line-content"> .back-btn{</td></tr><tr><td class="line-number" value="155"></td><td class="line-content">      display:inline-flex;</td></tr><tr><td class="line-number" value="156"></td><td class="line-content">      align-items:center;</td></tr><tr><td class="line-number" value="157"></td><td class="line-content">      gap:8px;</td></tr><tr><td class="line-number" value="158"></td><td class="line-content">      margin-top:10px;</td></tr><tr><td class="line-number" value="159"></td><td class="line-content">      padding:8px 12px;</td></tr><tr><td class="line-number" value="160"></td><td class="line-content">      border-radius:8px;</td></tr><tr><td class="line-number" value="161"></td><td class="line-content">      border:1px solid rgba(0,0,0,.08);</td></tr><tr><td class="line-number" value="162"></td><td class="line-content">      background:#f4f6f8;</td></tr><tr><td class="line-number" value="163"></td><td class="line-content">      font-size:12px;</td></tr><tr><td class="line-number" value="164"></td><td class="line-content">      font-weight:600;</td></tr><tr><td class="line-number" value="165"></td><td class="line-content">      color:#2b2e34;</td></tr><tr><td class="line-number" value="166"></td><td class="line-content">      text-decoration:none;</td></tr><tr><td class="line-number" value="167"></td><td class="line-content">      box-shadow:0 1px 2px rgba(0,0,0,.06);</td></tr><tr><td class="line-number" value="168"></td><td class="line-content">      transition:transform .12s ease, background .12s ease;</td></tr><tr><td class="line-number" value="169"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="170"></td><td class="line-content">  .back-btn:hover{ background:#e9ecef; transform:translateY(-1px); }</td></tr><tr><td class="line-number" value="171"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="172"></td><td class="line-content">  .legend-card{ z-index: 2001!important; } /* pastikan atas Mapbox controls */</td></tr><tr><td class="line-number" value="173"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="174"></td><td class="line-content">  .legend-nav {</td></tr><tr><td class="line-number" value="175"></td><td class="line-content">    display:flex; gap:8px; margin-top:10px; flex-wrap:wrap;</td></tr><tr><td class="line-number" value="176"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="177"></td><td class="line-content">.legend-btn {</td></tr><tr><td class="line-number" value="178"></td><td class="line-content">    display:inline-flex; align-items:center; gap:6px;</td></tr><tr><td class="line-number" value="179"></td><td class="line-content">    background:#f4f6f8; border:1px solid #e2e8f0; border-radius:8px;</td></tr><tr><td class="line-number" value="180"></td><td class="line-content">    padding:8px 10px; font-size:12px; color:#333; text-decoration:none;</td></tr><tr><td class="line-number" value="181"></td><td class="line-content">    box-shadow:0 1px 2px rgba(0,0,0,.05);</td></tr><tr><td class="line-number" value="182"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="183"></td><td class="line-content">.legend-btn:hover { background:#eef2f6; }</td></tr><tr><td class="line-number" value="184"></td><td class="line-content">.legend-btn .kecil { opacity:.7; font-weight:600; }</td></tr><tr><td class="line-number" value="185"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="186"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="187"></td><td class="line-content">    <span class="html-tag">&lt;/style&gt;</span></td></tr><tr><td class="line-number" value="188"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="189"></td><td class="line-content">    <span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://unpkg.com/@turf/turf@6.5.0/turf.min.js" rel="noreferrer noopener">https://unpkg.com/@turf/turf@6.5.0/turf.min.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="190"></td><td class="line-content"><span class="html-tag">&lt;/head&gt;</span></td></tr><tr><td class="line-number" value="191"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="192"></td><td class="line-content"><span class="html-tag">&lt;body&gt;</span></td></tr><tr><td class="line-number" value="193"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">id</span>="<span class="html-attribute-value">map</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="194"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">bus-cards-container</span>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">busCards</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="195"></td><td class="line-content"><span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-card text-center</span>"&gt;</span></td></tr><tr><td class="line-number" value="196"></td><td class="line-content">    <span class="html-tag">&lt;img <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://live.paj.com.my/assets/logo-main.png" rel="noreferrer noopener">https://live.paj.com.my/assets/logo-main.png</a>" <span class="html-attribute-name">class</span>="<span class="html-attribute-value">logo-container mt-2</span>" <span class="html-attribute-name">alt</span>="<span class="html-attribute-value">Logo</span>" <span class="html-attribute-name">style</span>="<span class="html-attribute-value">width: 70px; height: auto;</span>"&gt;</span></td></tr><tr><td class="line-number" value="197"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="198"></td><td class="line-content">    <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-item</span>"&gt;</span></td></tr><tr><td class="line-number" value="199"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-icon</span>" <span class="html-attribute-name">style</span>="<span class="html-attribute-value">background-image: url(https://live.paj.com.my/assets/bus-marker.png)</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="200"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-text</span>"&gt;</span>Bas<span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="201"></td><td class="line-content">    <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="202"></td><td class="line-content">    <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-item</span>"&gt;</span></td></tr><tr><td class="line-number" value="203"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-icon</span>" <span class="html-attribute-name">style</span>="<span class="html-attribute-value">background-image: url(https://live.paj.com.my/assets/bus-stop-marker.png)</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="204"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-text</span>"&gt;</span>Perhentian<span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="205"></td><td class="line-content">    <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="206"></td><td class="line-content">    <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-item</span>"&gt;</span></td></tr><tr><td class="line-number" value="207"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-route</span>"&gt;</span><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="208"></td><td class="line-content">        <span class="html-tag">&lt;div <span class="html-attribute-name">class</span>="<span class="html-attribute-value">legend-text</span>"&gt;</span>Laluan<span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="209"></td><td class="line-content">    <span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="210"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="211"></td><td class="line-content">    <span class="html-comment">&lt;!-- NEW: Butang Kembali --&gt;</span></td></tr><tr><td class="line-number" value="212"></td><td class="line-content">    <span class="html-tag">&lt;a <span class="html-attribute-name">class</span>="<span class="html-attribute-value">back-btn</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://live.paj.com.my/" rel="noreferrer noopener">https://live.paj.com.my</a>" <span class="html-attribute-name">id</span>="<span class="html-attribute-value">btnBack</span>"&gt;</span></td></tr><tr><td class="line-number" value="213"></td><td class="line-content">        <span class="html-comment">&lt;!-- ikon anak panah kecil (SVG inline supaya tiada dependensi) --&gt;</span></td></tr><tr><td class="line-number" value="214"></td><td class="line-content">        <span class="html-tag">&lt;svg <span class="html-attribute-name">width</span>="<span class="html-attribute-value">14</span>" <span class="html-attribute-name">height</span>="<span class="html-attribute-value">14</span>" <span class="html-attribute-name">viewBox</span>="<span class="html-attribute-value">0 0 24 24</span>" <span class="html-attribute-name">fill</span>="<span class="html-attribute-value">none</span>" <span class="html-attribute-name">aria-hidden</span>="<span class="html-attribute-value">true</span>"&gt;</span></td></tr><tr><td class="line-number" value="215"></td><td class="line-content">          <span class="html-tag">&lt;path <span class="html-attribute-name">d</span>="<span class="html-attribute-value">M10 19l-7-7 7-7</span>" <span class="html-attribute-name">stroke</span>="<span class="html-attribute-value">#2b2e34</span>" <span class="html-attribute-name">stroke-width</span>="<span class="html-attribute-value">2</span>" <span class="html-attribute-name">stroke-linecap</span>="<span class="html-attribute-value">round</span>" <span class="html-attribute-name">stroke-linejoin</span>="<span class="html-attribute-value">round</span>"/&gt;</span></td></tr><tr><td class="line-number" value="216"></td><td class="line-content">          <span class="html-tag">&lt;path <span class="html-attribute-name">d</span>="<span class="html-attribute-value">M3 12h18</span>" <span class="html-attribute-name">stroke</span>="<span class="html-attribute-value">#2b2e34</span>" <span class="html-attribute-name">stroke-width</span>="<span class="html-attribute-value">2</span>" <span class="html-attribute-name">stroke-linecap</span>="<span class="html-attribute-value">round</span>" <span class="html-attribute-name">stroke-linejoin</span>="<span class="html-attribute-value">round</span>"/&gt;</span></td></tr><tr><td class="line-number" value="217"></td><td class="line-content">        <span class="html-tag">&lt;/svg&gt;</span></td></tr><tr><td class="line-number" value="218"></td><td class="line-content">        Kembali</td></tr><tr><td class="line-number" value="219"></td><td class="line-content">    <span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="220"></td><td class="line-content"><span class="html-tag">&lt;/div&gt;</span></td></tr><tr><td class="line-number" value="221"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://code.jquery.com/jquery-3.6.0.min.js" rel="noreferrer noopener">https://code.jquery.com/jquery-3.6.0.min.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="222"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.js" rel="noreferrer noopener">https://api.mapbox.com/mapbox-gl-js/v3.8.0/mapbox-gl.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="223"></td><td class="line-content"><span class="html-tag">&lt;script&gt;</span></td></tr><tr><td class="line-number" value="224"></td><td class="line-content">    let geojson = {"name":"TK002","type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"LineString","coordinates":[[102.5647390259492,2.046825870668025],[102.565079142175,2.046980022662244],[102.5651512510645,2.046894656183264],[102.5652224097231,2.046821258146307],[102.5657147884464,2.047165063073444],[102.5660921661543,2.047440052473224],[102.5665807124467,2.047789554828007],[102.5671983373171,2.048259004239179],[102.568306711485,2.049111032462367],[102.5683510185888,2.04938131038041],[102.5681888407449,2.049559225901735],[102.5675864012948,2.050315278258879],[102.5666965524896,2.051372727887614],[102.5656100574975,2.052633047750989],[102.5651939463184,2.053088734915103],[102.5646965263316,2.053631509594796],[102.5637722007477,2.054339141299034],[102.5628955327466,2.054908898449077],[102.5617392519092,2.055671606583934],[102.5608595348018,2.056372892931581],[102.5603056616623,2.056998004360572],[102.5598879505624,2.05778134380634],[102.5590731484578,2.059218207511889],[102.5576411358967,2.061704961696002],[102.5562992943667,2.064057022256578],[102.5549645808943,2.066409978986155],[102.5536794999196,2.068841840817334],[102.5523136279086,2.071326990429844],[102.5507333408096,2.074176492369424],[102.5499819976688,2.075541930743955],[102.5497785158402,2.075974879794148],[102.5495905367487,2.076603743950269],[102.5495616088779,2.077821561158682],[102.5495673317301,2.079178571149361],[102.5499111468855,2.080716464734999],[102.5504014635863,2.082483824708846],[102.5505693572613,2.08336269340526],[102.5505458152996,2.083841704241125],[102.5506204158949,2.084958621130465],[102.5505253901691,2.085433481771671],[102.5504124669899,2.086055660636559],[102.5503822551583,2.086334257629409],[102.5503935499679,2.08663379780225],[102.5504341655553,2.087030598983636],[102.5506797601523,2.088632021804161],[102.5509984981727,2.090606421584769],[102.5513217644976,2.092403233017126],[102.5516883526315,2.095161023771333],[102.5521184503537,2.097667687613274],[102.5522891394173,2.098578672020444],[102.5524571062925,2.099690495332927],[102.5526882684812,2.101247061392527],[102.5529134574213,2.103170566139181],[102.5530363148493,2.104532224933926],[102.5530908643417,2.104995996840712],[102.5534402130037,2.106575443967303],[102.5538151436251,2.108479138162331],[102.5539861715367,2.109419296227437],[102.5541995524569,2.110461561352792],[102.5544065305404,2.111506248929558],[102.5545435185547,2.112378194906432],[102.554768409982,2.113406029608496],[102.5550399069983,2.114984001160387],[102.5552808687975,2.116169333133144],[102.5555723307651,2.117789586737767],[102.5558796079107,2.119515042809363],[102.5564425787671,2.12308248069939],[102.5569060032152,2.125401732097033],[102.5573476643769,2.127817682712834],[102.5576698507322,2.129720125761824],[102.5580102246008,2.131700973717676],[102.5582507860535,2.132952867527997],[102.5585314290409,2.13464710867343],[102.5588105364501,2.13635835459394],[102.5590738002285,2.137761113055219],[102.5592300293899,2.138792019064053],[102.5593297550542,2.139317089844885],[102.5596847692931,2.140038181656326],[102.5603385766768,2.141075843495524],[102.56114138018,2.142482185710882],[102.561911462033,2.143764412876818],[102.5624222004402,2.144623831786302],[102.5630567257076,2.145673524340541],[102.5636687113537,2.146707779130448],[102.5646136497464,2.148304394997159],[102.5653947560408,2.149620751570507],[102.566205215517,2.150921775629731],[102.5669025208718,2.15210393878354],[102.5673467591165,2.152861296449721],[102.5674646265972,2.153008185301691],[102.567579977136,2.153126362835253],[102.5684913547567,2.153670145006694],[102.5696565794084,2.154294848888603],[102.5710415178069,2.155010227137948],[102.5763609046536,2.157837240132043],[102.5807813070874,2.160096249915095],[102.5810393556434,2.160322224134416],[102.5826402474965,2.161559436669103],[102.5850358054304,2.163493040381896],[102.5874172459767,2.165434781869607],[102.5899625609495,2.167527551891491],[102.5927538575529,2.169706916492269],[102.5988111764052,2.174503213716913],[102.602879399409,2.177626102022822],[102.6058189451683,2.179762053720268],[102.6106811851474,2.183150275040933],[102.6160166699902,2.186635657265822],[102.6221315908177,2.190233500045329],[102.6283318056251,2.193827148523261],[102.6300642391423,2.194871033034353],[102.6322044338246,2.196564830258262],[102.6332277137252,2.19734377782966],[102.6341325216542,2.197992454768443],[102.6356865248126,2.19881257864245],[102.637239481045,2.199616174600635],[102.6385807227836,2.200378837310911],[102.6398425484156,2.201042728970233],[102.6417291631581,2.202008041695691],[102.6435134138228,2.202949346635942],[102.6448444700151,2.203599614142398],[102.6450320478054,2.203752561158864],[102.6453532361151,2.204066026747539],[102.6465969997249,2.205424175659369],[102.6477451151238,2.206627604089339],[102.6488928569493,2.207873437784361],[102.6502589902332,2.209271083532742],[102.6516118400082,2.210689618365469],[102.6524042474396,2.211533104093346],[102.6526770463742,2.21168915903478],[102.654582310814,2.212770773811507],[102.655825067215,2.21354165573614],[102.656091889316,2.213733103938014],[102.6569337170807,2.214452867316616],[102.6583882527611,2.215329881022115],[102.6592445890541,2.215860609541303],[102.6602984962251,2.216570333026485],[102.6628208247671,2.217794016918288],[102.6661356114012,2.219093930592496],[102.6696402290523,2.220495524579022],[102.6727423351363,2.221730737203528],[102.6762802056411,2.222780425504772],[102.6794870631091,2.223911539743708],[102.6824918101662,2.225008294993049],[102.6846046337156,2.225834726162068],[102.684873973237,2.225933346118029],[102.6851719812991,2.226043704050295],[102.6855990786114,2.226108669629068],[102.6862584292219,2.226055036029634],[102.6873860803187,2.225877374771919],[102.6888738738906,2.225676773499479],[102.6907517057071,2.22540489224011],[102.6916598229074,2.225240954395124],[102.691859641756,2.225171240682037],[102.6925419417225,2.224732791689821],[102.6935214578086,2.223902641717954],[102.6948063079345,2.2228051841398],[102.6963688300457,2.221497478943745],[102.6975739666383,2.220477593622682],[102.6997243000658,2.218688817097096],[102.7027925695422,2.216221815304607],[102.7029006718586,2.216146018491864],[102.7022597898017,2.215392147525042],[102.7016021522399,2.214446448254881],[102.7011899893455,2.213835448969003],[102.700438506063,2.212771403848424],[102.6995487403696,2.211528784894104],[102.6988101060565,2.210485319575447],[102.6985993670204,2.210123868614918],[102.6984392088505,2.209751685880852],[102.6983192376864,2.20916355911324],[102.6983229176306,2.208745144260929],[102.698533489842,2.207907301813512],[102.6987088103248,2.20758855817486],[102.6995428313321,2.206460762260223],[102.7004426008514,2.205235523216777],[102.7014671278318,2.20386598643001],[102.7024091495727,2.202783725803888],[102.7025230958241,2.20270683116324],[102.7027465120736,2.202560877858297],[102.7031359125389,2.202384474242157],[102.7032942802249,2.20235719735138],[102.7036138141263,2.2023163633777],[102.7038552117026,2.202343068702075],[102.7051446368992,2.20242274669809],[102.7068623173356,2.202520548473105],[102.707117347517,2.202520051918946],[102.7076625157809,2.202439904743155],[102.7080582409484,2.202342666319785],[102.7083100156148,2.202203877946581],[102.7091582178515,2.201626514699263],[102.7098650090846,2.20076611330373],[102.7100161822024,2.200527344708963],[102.7102782508524,2.199990583178198],[102.7104250861621,2.199669259974229],[102.7104795070027,2.199347944278381],[102.7105092180872,2.198919218157154],[102.7104955278101,2.198654526585931],[102.7104154933516,2.198261060277152],[102.7102394153177,2.19779018394274],[102.7099681114973,2.197091370305159],[102.7094507690632,2.195739972780854],[102.7089005865199,2.194242663128498],[102.7084161858408,2.192887509562238],[102.7078192252165,2.191267251025045],[102.7074257709376,2.190251046038507],[102.7070428167457,2.189269307716115],[102.7067321165306,2.18835634416033],[102.7062044229297,2.186896969657693],[102.7057175515418,2.185620506245189],[102.7056491049409,2.18541802371114],[102.7055219224523,2.184889866188174],[102.7053219883991,2.183597560071084],[102.7050778597071,2.182008301846656],[102.7048819293205,2.180696170332779],[102.7048896742547,2.180391952671483],[102.7049928204956,2.179188548481578],[102.7051342869714,2.177860790389395],[102.7053345462098,2.176376731295717],[102.7054912056131,2.175696263808916],[102.7055501348975,2.175509398191982],[102.7056595003518,2.175187174019485],[102.7060566073557,2.174534175831908],[102.706220462873,2.17433427804369],[102.7069683368256,2.173555077469517],[102.7079075261436,2.17251032146651],[102.7080160010785,2.172395258576764],[102.7081164284859,2.172312342793528],[102.7085821207409,2.172094100275154],[102.7088188057477,2.171971403336445],[102.709697325796,2.171849042122656],[102.7099875879456,2.171849689512841],[102.7110556031309,2.171882200881193],[102.7113301143764,2.171868200997303],[102.7120098761667,2.171942142669428],[102.7123863672509,2.171982762244435],[102.713160254119,2.172085295178512],[102.7135384999646,2.17210911255437],[102.7139088120172,2.172158928009435],[102.7141322658697,2.17217266983633],[102.7142699657664,2.172161458983434],[102.7147514700003,2.171967838366506],[102.7152562915044,2.171685313934191],[102.7155582526521,2.17143033678685],[102.7157758523483,2.171172704330677],[102.7162568676839,2.170243979536171],[102.7169590667954,2.169050100033907],[102.7177208885804,2.167620572961017],[102.7187100656221,2.165893116021492],[102.7194259961173,2.164659421883908],[102.7205428312926,2.162672640468249],[102.7216109340838,2.160793458150731],[102.7220359775364,2.160014161985543],[102.7247330286045,2.155220725089535],[102.7266225487286,2.151981477147106],[102.7287208768255,2.148291726615839],[102.7297471130471,2.146512083805541],[102.7298560289107,2.145847821990587],[102.7298279555973,2.143803802219679],[102.729983115358,2.143148810249332],[102.7316059180694,2.140233617120606],[102.7355461726751,2.134508666369663],[102.7377421075738,2.136147291868285],[102.7385496307201,2.136724367608066],[102.7397862695249,2.137596744349165],[102.7402665102297,2.137982404102507],[102.7410079724776,2.138483799384886],[102.7419807576716,2.13897335287846],[102.7423233433049,2.13915303019991],[102.7430313955317,2.139301809259563],[102.7455202558725,2.139557587590368],[102.7489622053437,2.139974853439268],[102.7529258612689,2.140491672087278],[102.7547713396511,2.140748698917705],[102.7567971604519,2.140966865553718],[102.7616648654413,2.141440995587419],[102.7621884021597,2.141508290641086],[102.7626449288233,2.14165325150834],[102.7630445212894,2.141825641726254],[102.7644186542,2.142918674253148],[102.7662785069472,2.144518558534116],[102.7681426365795,2.14614451072663],[102.7695168549777,2.147364309273414],[102.770954499393,2.14859485173187],[102.7723233952906,2.149781207051308],[102.7734697327094,2.150792009514459],[102.7744239012573,2.15150824849108],[102.7746541317522,2.151644000765615],[102.7758293816234,2.152349920557841],[102.7766204365599,2.152840729882767],[102.7767966354613,2.152679730554317],[102.7766122938217,2.152543790575451],[102.7765016393324,2.152593026996223],[102.7763108325762,2.152487854041294],[102.7757327949853,2.152197662383069],[102.7748845475032,2.151710246774994],[102.7742543705743,2.151310222107358],[102.7737562089518,2.150932790244695],[102.7731209582985,2.150401050138473],[102.7725512484215,2.149914314870902],[102.7717667410677,2.149217847606256],[102.7703418131537,2.147991112759132],[102.7690232032211,2.146844041742872],[102.7680595813372,2.145990261027339],[102.7670112032026,2.145055653520812],[102.7669332796232,2.14500010308547],[102.7659014382181,2.144094714417404],[102.7646732069584,2.143084588780627],[102.7635929300836,2.142201532187309],[102.7628235838492,2.141645056796828],[102.7619304452248,2.141387284520505],[102.7615826260971,2.14135448760713],[102.7586480708383,2.141095286255153],[102.7566895523841,2.140864108437637],[102.7533847125217,2.140488277645801],[102.7496182510443,2.140009933658893],[102.747328881794,2.139715251700648],[102.7436551404598,2.139311592656106],[102.7424741141425,2.139137778481112],[102.7423430134803,2.139057518616421],[102.7411823114054,2.138510467209587],[102.7403306203396,2.137934309667215],[102.7388935957055,2.13686304588144],[102.7373294031773,2.135738849237634],[102.7354538569597,2.13439636177614],[102.7348238311464,2.13519748969329],[102.7338581551835,2.136625977585537],[102.7325754406014,2.138511639296397],[102.7308783273717,2.141342350582948],[102.7299725102619,2.143026710992678],[102.7296976505363,2.143636962706392],[102.7296481965112,2.143995390619006],[102.7297065388535,2.14482658151261],[102.7297125959581,2.146179544810586],[102.7296458115174,2.146600845044901],[102.7294912242105,2.146852372264211],[102.7287549835682,2.148126265140488],[102.7278186038973,2.149762040052551],[102.7267630393666,2.15159067567129],[102.7256407375434,2.153498275804194],[102.7241499133221,2.156143151785881],[102.7227577510899,2.158601977213564],[102.7217247047356,2.160451274944427],[102.720506260577,2.162642748749748],[102.7200564387808,2.163434670279209],[102.7191617125411,2.165013296365678],[102.7176809998042,2.167647970653931],[102.7165857746984,2.169578304660475],[102.7156696012989,2.171210677699471],[102.7153353697947,2.171565146990381],[102.7152094846863,2.171665190321982],[102.7142697568589,2.172114048957188],[102.7139945466084,2.172126436059801],[102.7123092711648,2.17195209572683],[102.7109573732586,2.171812074017128],[102.7104639159949,2.171812641038993],[102.7095775750184,2.171815400991711],[102.7087151640644,2.171943450984957],[102.7080071233775,2.172312546698176],[102.7078156500208,2.172522053738722],[102.7067110595154,2.173740303626722],[102.7063798270344,2.174089733640639],[102.706153167064,2.174358143378262],[102.7057967355058,2.174866095261795],[102.705540807696,2.175366700111149],[102.705325146022,2.176144515550682],[102.7051657777626,2.177278364002307],[102.7049644001029,2.178840158458054],[102.7048248242763,2.180279747476188],[102.7048476207415,2.181069920479856],[102.7050174131577,2.182015507577602],[102.7052297966413,2.183322491296672],[102.7054456714387,2.184754095609539],[102.7055161737843,2.185167998959389],[102.7055907514193,2.185403044050235],[102.7059419585794,2.18640724869726],[102.7065117849288,2.18792203387194],[102.7068467516982,2.18883658461524],[102.7073480229328,2.190223999762045],[102.7080202885022,2.192002620441202],[102.7085540695763,2.19348977201761],[102.7090904676299,2.194946051003004],[102.7098067064159,2.196823333131995],[102.7104219844661,2.198559540532115],[102.7104438494487,2.198727831249779],[102.7104496053445,2.199177109854757],[102.7104160870235,2.199476418716156],[102.710386165104,2.199678198228086],[102.7100936090134,2.200257929500862],[102.7099417652353,2.200529172172068],[102.7091241275462,2.201567056967735],[102.7089010285317,2.201783545749483],[102.7086626615008,2.201922885420312],[102.7084822059038,2.202043132750231],[102.7079543910079,2.202310904027572],[102.7073398770121,2.20244788805049],[102.7065507165381,2.202451880013474],[102.706207796871,2.202421497566821],[102.7043282393605,2.20232904497068],[102.7034187674446,2.202289329161508],[102.7031285772031,2.202348462893812],[102.702903545507,2.202447555705891],[102.7023318253481,2.202771466371598],[102.7021368265086,2.203009012162932],[102.7017846821091,2.203405970525832],[102.701347366195,2.203953570438224],[102.7002488360989,2.205393395208898],[102.6995793994629,2.20630238212265],[102.6986115806548,2.207582772563096],[102.6984492508747,2.207906619964153],[102.6983155795395,2.208442444895636],[102.6982924947319,2.208691283955953],[102.6983111556597,2.20945007498423],[102.6985552684907,2.210194905335563],[102.6989399442336,2.21077465291573],[102.6997514858355,2.211905153824696],[102.7003149806851,2.21270984802234],[102.7013564286467,2.214222537386193],[102.7027295173636,2.216154295295284],[102.7021726006999,2.216658239059514],[102.7015290138621,2.217175256283165],[102.7008076499948,2.217733882678989],[102.6998599777935,2.218468481784533],[102.6984039662894,2.219721089795506],[102.697269569263,2.220680332932021],[102.695956936718,2.22178670820677],[102.694856821121,2.222691387889294],[102.6933435700898,2.223987609603986],[102.6922681364549,2.224859082672101],[102.6918861857414,2.225119504543999],[102.6917290814974,2.2251786906479],[102.6908073327416,2.225355376143407],[102.6896773301352,2.225509331676552],[102.6881659994124,2.225716356262385],[102.6864375473101,2.225981542950789],[102.6855215352227,2.226065108749205],[102.6849270106018,2.225923543233146],[102.6835904243841,2.225395644445735],[102.6818799288752,2.224744341420104],[102.680214207111,2.224139991994961],[102.6779279941859,2.223306828535901],[102.675739212188,2.222517373659236],[102.6728500858046,2.221710114132954],[102.6701855489447,2.220666065827271],[102.6680473120905,2.219770668575662],[102.6656478204305,2.218828878209911],[102.6633059270022,2.21790166261275],[102.6604211079215,2.21657050527994],[102.6577448091824,2.214891078167757],[102.6568944207193,2.214351190247182],[102.6556217396761,2.213335049898086],[102.6547497972803,2.212774837874601],[102.6532460128879,2.211942821771702],[102.6524600582905,2.211422628120799],[102.6522213560716,2.211224033114978],[102.651217893162,2.210206578164603],[102.6497222025379,2.208664567875916],[102.6485295531163,2.207405104911829],[102.6472106401049,2.205991329685586],[102.6454895030784,2.20415903617945],[102.6451092048577,2.203762014985429],[102.6447082240322,2.20348383374663],[102.6434684727806,2.202871663629939],[102.6420746902346,2.202137634631468],[102.6401388759743,2.20113882159023],[102.6383875835557,2.200226641267644],[102.6366848048455,2.199301234806072],[102.6345361169175,2.198177135764465],[102.6328499381836,2.197098580989656],[102.6317286790366,2.196157064631406],[102.6309416355744,2.195508815230215],[102.630276915822,2.19501911405456],[102.629266768909,2.194431750097743],[102.6278177953226,2.1935953154036],[102.6258315536177,2.19242718014773],[102.6239399248117,2.191226730207943],[102.6226889711427,2.190487748153997],[102.6201716210313,2.189030022067715],[102.6187327373215,2.188148573483909],[102.6176577678472,2.187509863022895],[102.6161707805949,2.186583736292661],[102.6142804273777,2.185423372427454],[102.6117129202744,2.183866139512297],[102.6098062711168,2.182598525342229],[102.6077358689136,2.181144551172388],[102.6059103165491,2.179787884522798],[102.6043249023538,2.178642847640369],[102.6030958977413,2.177747309707901],[102.6024931058927,2.177294164607044],[102.6009862779325,2.176217865111862],[102.5995951005099,2.175178576098078],[102.5983353560183,2.174169158569664],[102.5969735313966,2.173087638987249],[102.5951718401135,2.171649850859606],[102.5932214639986,2.170034525253526],[102.5913042458736,2.168553796421445],[102.5900512993581,2.16753372554619],[102.5890618413355,2.166742797012681],[102.5878450582402,2.165742616516882],[102.5862938719925,2.164472882138462],[102.5835971938277,2.162282130744822],[102.5814587600456,2.160580374317877],[102.580813577612,2.160092774816332],[102.5806521726114,2.15999667799111],[102.5789860236632,2.159127332017713],[102.5771365945268,2.158158505237896],[102.5758914183019,2.157534540694487],[102.5743429087914,2.156714146572474],[102.5700504195755,2.154442292760769],[102.5678631092562,2.153346770160516],[102.5675205993272,2.152998643943827],[102.5668674669342,2.151941904731509],[102.5658939313429,2.150294952450236],[102.5646862238753,2.14835841526015],[102.5634391235869,2.146244336039371],[102.5624387489119,2.144583748855227],[102.561238826689,2.142578973826823],[102.560198675048,2.140778966211556],[102.5595677341816,2.139659870535857],[102.5593762862077,2.139302285644438],[102.5592561974211,2.138668209783773],[102.5590121803571,2.137135683026549],[102.5587010427643,2.135330008548033],[102.5583860090121,2.133361158536827],[102.5580418916255,2.131509931555395],[102.5579060171434,2.13077207267966],[102.5577850182139,2.130208989340831],[102.5575523105894,2.128928943275469],[102.5574010794606,2.127881100307925],[102.557177046258,2.12664666069466],[102.55698419984,2.125476828758064],[102.5567237966515,2.124056176829883],[102.5563878401975,2.122273551544929],[102.5561173797537,2.12052742419153],[102.5559992241883,2.119899688721854],[102.5558550819309,2.119105603623661],[102.5557010687384,2.118253418733333],[102.555423959407,2.116817549025425],[102.5552290006717,2.115676201308401],[102.5549751004979,2.114332310780189],[102.5547977128353,2.11334130639654],[102.5544655194145,2.111655578204851],[102.5540961228024,2.109713299640541],[102.5537045454255,2.107740064016353],[102.553382287104,2.106116561783427],[102.5531010059946,2.104810206705249],[102.5529754418792,2.103532995251588],[102.5528561412952,2.102495342345801],[102.5527332530716,2.101360965401401],[102.5525645442511,2.100067923627827],[102.5523594879023,2.098769405510003],[102.5521227121987,2.097351254626312],[102.5518666567344,2.095682672726904],[102.5516492400316,2.094360213440498],[102.551395816548,2.092784218436078],[102.5511096385054,2.09100861399578],[102.5508680821688,2.089533996097118],[102.5506536896043,2.088191800404577],[102.5504518210648,2.086790324251893],[102.5504264242459,2.086491898296886],[102.5504448822278,2.086250697454115],[102.5506312506427,2.085159200332759],[102.5506982800837,2.084789082687247],[102.550716776841,2.084535884735177],[102.5507651859272,2.083551537138288],[102.5507301521243,2.083084504283508],[102.550528255641,2.08224226752788],[102.5502779649205,2.081461597878408],[102.5499811494595,2.080435985833299],[102.5497356442189,2.079358031889768],[102.5496162662476,2.078442491088993],[102.5496317820602,2.077658763608046],[102.5496534293647,2.076804793861194],[102.5497095791133,2.07645313869119],[102.5499188308796,2.07583041772371],[102.5500816320945,2.075503304668804],[102.5505856106569,2.07459962323818],[102.5512589063771,2.073317994716528],[102.551598324557,2.072729260985719],[102.5525104473205,2.071078266194255],[102.5532668238371,2.069659566879039],[102.5539855834137,2.068368326527899],[102.5545644593117,2.067283285802064],[102.5554116050602,2.065805543906564],[102.5561625409633,2.064393887155455],[102.556957389017,2.06301449517934],[102.557598366277,2.061874932511883],[102.5582166844671,2.060791098244256],[102.5590367959216,2.059335587689308],[102.5601819636989,2.057291995903441],[102.5606602614459,2.05663854007837],[102.5612013982303,2.056146895547668],[102.5637456856471,2.054416649207211],[102.5647094435279,2.053743401855696],[102.5654262040522,2.052910494739569],[102.5671469679369,2.050897513713289],[102.5684402321598,2.049356264411465],[102.5686109117245,2.049382848092046],[102.5687782987822,2.049418388370774],[102.5695946162776,2.049992534939512],[102.5702243541084,2.050434503670231],[102.5706382918421,2.050753575648745],[102.5708442471008,2.050950239099912],[102.5720815588244,2.05237146928511],[102.5721722582307,2.052331410851418],[102.57264304947,2.052030699642661],[102.5726267001727,2.051772028218162],[102.5720792989992,2.051234904723477],[102.5714134324907,2.050543449294396],[102.5706170848696,2.049882788353396],[102.5694049180812,2.048985551787312],[102.5682718654459,2.04813743981237],[102.5667818473391,2.046985817244416],[102.5659793150749,2.046385070116695],[102.5650266020427,2.04589999175422],[102.5635602745113,2.045324863297673],[102.5632712343383,2.045978888477231],[102.5640391354098,2.046268229959856],[102.5642947344591,2.046364967679285],[102.5646732362564,2.046569224464815],[102.5646281213396,2.046727240184393],[102.5646665899828,2.046765980163893],[102.5646677724469,2.046850679319795]]}}]};</td></tr><tr><td class="line-number" value="225"></td><td class="line-content">    let pois = [{"name":"Terminal Maharani","lat":"2.04669694","lng":"102.56485480"},{"name":"Terminal Feri Bandar Maharani Bandar Diraja","lat":"2.04804211","lng":"102.56686930"},{"name":"ST,Jalan KesangTK","lat":"2.05535488","lng":"102.56192250"},{"name":"Jalan Kesang","lat":"2.05899086","lng":"102.55898010"},{"name":"Taman Kenangan Tun Syed Nasir,Jalan Kesang","lat":"2.06576233","lng":"102.55525380"},{"name":"SMK Parit Bunga","lat":"2.07463886","lng":"102.55041310"},{"name":"Sekolah Kebangsaan Rawang","lat":"2.10963290","lng":"102.55395590"},{"name":"Taman Cerah Indah","lat":"2.11357203","lng":"102.55476800"},{"name":"SK Rawang, Sg. Mati (*pinda)","lat":"2.12181968","lng":"102.55613950"},{"name":"Sungai Sedok","lat":"2.12564731","lng":"102.55689070"},{"name":"Taman Muhibbah","lat":"2.13386145","lng":"102.55835280"},{"name":"Taman Bestari,Jalan Muar","lat":"2.14284466","lng":"102.56134930"},{"name":"Balai Polis Sungai Mati, Bukit Gambir","lat":"2.14652050","lng":"102.56351940"},{"name":"Sek Men (Persendirian) Pei Hwa,Bukit Gambir","lat":"2.14892336","lng":"102.56496250"},{"name":"SMK tunku Mahmud Iskandar (Tiang 2)","lat":"2.15597182","lng":"102.57274340"},{"name":"Pasar Awam Serom,Bukit Gambir","lat":"2.15916879","lng":"102.57879450"},{"name":"Taman KSM Serom 4","lat":"2.16602845","lng":"102.58805300"},{"name":"Kampung Serom Hilir 5","lat":"2.17026045","lng":"102.59332600"},{"name":"Unit Selenggara Jalan JKR Daerah Tangkak","lat":"2.18402625","lng":"102.61175890"},{"name":"Kampung Parit Pulai","lat":"2.18727409","lng":"102.61708840"},{"name":"Taman Cahaya","lat":"2.18895889","lng":"102.61980830"},{"name":"Taman Wira","lat":"2.20530202","lng":"102.64639640"},{"name":"Kampung Parit Rabu","lat":"2.20670115","lng":"102.64777980"},{"name":"OPP Dewan Serbaguna Bukit Gambir","lat":"2.20755756","lng":"102.64854720"},{"name":"Pasar FAMA Bukit Gambir","lat":"2.21459063","lng":"102.65703910"},{"name":"Taman Sri Jaya","lat":"2.21711235","lng":"102.66129830"},{"name":"SMK Bukit Gambir (Tiang 2)","lat":"2.21869416","lng":"102.66495230"},{"name":"Kawasan Perindustrian Gresik","lat":"2.21393818","lng":"102.70142840"},{"name":"Surau Kampung Panchor","lat":"2.19474407","lng":"102.70911060"},{"name":"Kampung Melayu Baru Panchor","lat":"2.17207325","lng":"102.70891310"},{"name":"Kampung Jawa Panchor","lat":"2.17218774","lng":"102.71420100"},{"name":"Sekolah Kebangsaan Kota Raja","lat":"2.17122482","lng":"102.71577940"},{"name":"UTHM Pagoh I","lat":"2.15214600","lng":"102.72676100"},{"name":"UTHM Pagoh II","lat":"2.14683700","lng":"102.72975700"},{"name":"Agro Bazar R\u0026amp;R Pagoh","lat":"2.13691722","lng":"102.73883450"},{"name":"Sekolah Agama Pekan Pagoh","lat":"2.14573359","lng":"102.76759870"},{"name":"Masjid Pekan Pagoh","lat":"2.14831004","lng":"102.77064580"},{"name":"SMK Sultan Alauddin Riayat Shah 1","lat":"2.15257038","lng":"102.77649350"},{"name":"Masjid Jamek Pekan Pagoh","lat":"2.14783822","lng":"102.77031450"},{"name":"Seri Pekembar","lat":"2.13588207","lng":"102.73786460"},{"name":"UTHM Pagoh III","lat":"2.15235800","lng":"102.72602600"},{"name":"SK Panchor","lat":"2.17404140","lng":"102.70632360"},{"name":"No 2 kanan Kampung Gaung","lat":"2.22566168","lng":"102.68813090"},{"name":"JPS Sawahring","lat":"2.22406994","lng":"102.68022710"},{"name":"Klinik Desa Sawahring Ledang","lat":"2.22291288","lng":"102.67709080"},{"name":"Kampung Sungai Ekor","lat":"2.22137483","lng":"102.67216970"},{"name":"Kampung Sungai Jaya","lat":"2.21990967","lng":"102.66860430"},{"name":"SMK Bukit Gambir","lat":"2.21868040","lng":"102.66537730"},{"name":"Jabatan Bomba Bukit Gambir","lat":"2.21619045","lng":"102.66001130"},{"name":"Taman Melor Utama","lat":"2.21417476","lng":"102.65686770"},{"name":"Pekan Bukit Gambir (*pinda)","lat":"2.21111103","lng":"102.65222580"},{"name":"Dewan Serbaguna Bukit Gambir","lat":"2.20762506","lng":"102.64884240"},{"name":"Opp Kampung Parit Rabu","lat":"2.20069038","lng":"102.63948090"},{"name":"SK Kampung Simpang Lima Pekan","lat":"2.19908423","lng":"102.63649740"},{"name":"Taman Meranti, Simpang Lima","lat":"2.19767064","lng":"102.63379050"},{"name":"Kampung Meranti Sundai","lat":"2.19674657","lng":"102.63258450"},{"name":"SJK (C) San Yu","lat":"2.19494480","lng":"102.63030440"},{"name":"Taman Serom Indah","lat":"2.19218090","lng":"102.62560500"},{"name":"Taman Sri Pulai","lat":"2.18691716","lng":"102.61675090"},{"name":"Taman Pulai Indah Serom","lat":"2.17857416","lng":"102.60433100"},{"name":"Taman Bukit Cempaka","lat":"2.17252722","lng":"102.59646660"},{"name":"Taman KSM Serom 5","lat":"2.17032881","lng":"102.59366590"},{"name":"KKTM Ledang","lat":"2.16978030","lng":"102.59299970"},{"name":"Tmn Serom Jaya (Bus Stop)","lat":"2.16808900","lng":"102.59084700"},{"name":"Opposite Taman KSM Serom 4","lat":"2.16616436","lng":"102.58843450"},{"name":"Pusat Perniagaan Serom","lat":"2.16417969","lng":"102.58605870"},{"name":"Kampung Serom 3","lat":"2.16312068","lng":"102.58470400"},{"name":"Kampung Serom 2a,Bukit Gambir","lat":"2.15988806","lng":"102.58050450"},{"name":"Kampung Serom 1,Bukit Gambir","lat":"2.15759205","lng":"102.57616370"},{"name":"SMK Tunku Mahmud Iskandar","lat":"2.15540715","lng":"102.57213070"},{"name":"SJK (C) Pei Hwa","lat":"2.14722057","lng":"102.56412000"},{"name":"Pekan Sungai Mati","lat":"2.14481788","lng":"102.56270540"},{"name":"TM Taman Bestari","lat":"2.14201993","lng":"102.56100860"},{"name":"Taman Muhibbah 2","lat":"2.13432781","lng":"102.55864540"},{"name":"Taman Mawar","lat":"2.12783572","lng":"102.55747560"},{"name":"SJK ( C ) Chung Hwa","lat":"2.12485309","lng":"102.55697940"},{"name":"Opposite Taman Cerah Indah","lat":"2.11364588","lng":"102.55493690"},{"name":"Parit Ponorogo","lat":"2.10217486","lng":"102.55292480"},{"name":"Masjid Jamek Parit Bunga","lat":"2.08437624","lng":"102.55083070"},{"name":"Sekolah Kebangsaan Parit Bunga","lat":"2.07902809","lng":"102.54974530"},{"name":"Kondominium Mutiara Maharani,Jalan Kesang","lat":"2.07141273","lng":"102.55246040"},{"name":"Sekolah Menengah Sains Muar","lat":"2.06432254","lng":"102.55628910"},{"name":"Kawasan Perindustrian Tanjung Agas,Jalan Kesang","lat":"2.06090078","lng":"102.55826630"},{"name":"Opposite ST,Jalan Kesang","lat":"2.05496415","lng":"102.56296800"},{"name":"Terminal Maharani","lat":"2.04669694","lng":"102.56485480"}];</td></tr><tr><td class="line-number" value="226"></td><td class="line-content">    let imageBusStop = 'https://live.paj.com.my/assets/bus-stop-marker.png';</td></tr><tr><td class="line-number" value="227"></td><td class="line-content">    let imageArrows = 'https://live.paj.com.my/assets/arrow-markers-red.png';</td></tr><tr><td class="line-number" value="228"></td><td class="line-content">    let imageBus = 'https://live.paj.com.my/assets/bus-marker.png';</td></tr><tr><td class="line-number" value="229"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="230"></td><td class="line-content">    // Convert POIs to GeoJSON format</td></tr><tr><td class="line-number" value="231"></td><td class="line-content">    const poisGeoJSON = {</td></tr><tr><td class="line-number" value="232"></td><td class="line-content">        type: 'FeatureCollection',</td></tr><tr><td class="line-number" value="233"></td><td class="line-content">        features: pois.map(poi =&gt; ({</td></tr><tr><td class="line-number" value="234"></td><td class="line-content">            type: 'Feature',</td></tr><tr><td class="line-number" value="235"></td><td class="line-content">            geometry: {</td></tr><tr><td class="line-number" value="236"></td><td class="line-content">                type: 'Point',</td></tr><tr><td class="line-number" value="237"></td><td class="line-content">                coordinates: [parseFloat(poi.lng), parseFloat(poi.lat)]</td></tr><tr><td class="line-number" value="238"></td><td class="line-content">            },</td></tr><tr><td class="line-number" value="239"></td><td class="line-content">            properties: {</td></tr><tr><td class="line-number" value="240"></td><td class="line-content">                name: poi.name</td></tr><tr><td class="line-number" value="241"></td><td class="line-content">            }</td></tr><tr><td class="line-number" value="242"></td><td class="line-content">        }))</td></tr><tr><td class="line-number" value="243"></td><td class="line-content">    };</td></tr><tr><td class="line-number" value="244"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="245"></td><td class="line-content">    // Create initial bus GeoJSON with empty features</td></tr><tr><td class="line-number" value="246"></td><td class="line-content">    const busGeoJSON = {</td></tr><tr><td class="line-number" value="247"></td><td class="line-content">        type: 'FeatureCollection',</td></tr><tr><td class="line-number" value="248"></td><td class="line-content">        features: []</td></tr><tr><td class="line-number" value="249"></td><td class="line-content">    };</td></tr><tr><td class="line-number" value="250"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="251"></td><td class="line-content">    mapboxgl.accessToken = 'pk.eyJ1IjoiYWxpZmRhcnNpbSIsImEiOiJjbTRjZ3djcmIwNTMxMmlxcGZvZWx1eTFqIn0.X3VV1PhXekp3_HAwoB6kbw';</td></tr><tr><td class="line-number" value="252"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="253"></td><td class="line-content">    // Initialize map with default center</td></tr><tr><td class="line-number" value="254"></td><td class="line-content">    const map = new mapboxgl.Map({</td></tr><tr><td class="line-number" value="255"></td><td class="line-content">        container: 'map',</td></tr><tr><td class="line-number" value="256"></td><td class="line-content">        style: 'mapbox://styles/mapbox/streets-v12',</td></tr><tr><td class="line-number" value="257"></td><td class="line-content">        center: [103.317818, 2.029433],</td></tr><tr><td class="line-number" value="258"></td><td class="line-content">        zoom: 8</td></tr><tr><td class="line-number" value="259"></td><td class="line-content">    });</td></tr><tr><td class="line-number" value="260"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="261"></td><td class="line-content">    // Wait for map to load before adding layers</td></tr><tr><td class="line-number" value="262"></td><td class="line-content">    map.on('load', () =&gt; {</td></tr><tr><td class="line-number" value="263"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="264"></td><td class="line-content">        // Load both bus stop and bus icons</td></tr><tr><td class="line-number" value="265"></td><td class="line-content">        Promise.all([</td></tr><tr><td class="line-number" value="266"></td><td class="line-content">            new Promise((resolve, reject) =&gt; {</td></tr><tr><td class="line-number" value="267"></td><td class="line-content">                map.loadImage(imageBusStop, (error, image) =&gt; {</td></tr><tr><td class="line-number" value="268"></td><td class="line-content">                    if (error) reject(error);</td></tr><tr><td class="line-number" value="269"></td><td class="line-content">                    map.addImage('bus-stop-icon', image);</td></tr><tr><td class="line-number" value="270"></td><td class="line-content">                    resolve();</td></tr><tr><td class="line-number" value="271"></td><td class="line-content">                });</td></tr><tr><td class="line-number" value="272"></td><td class="line-content">            }),</td></tr><tr><td class="line-number" value="273"></td><td class="line-content">            new Promise((resolve, reject) =&gt; {</td></tr><tr><td class="line-number" value="274"></td><td class="line-content">                map.loadImage(imageBus, (error, image) =&gt; {</td></tr><tr><td class="line-number" value="275"></td><td class="line-content">                    if (error) reject(error);</td></tr><tr><td class="line-number" value="276"></td><td class="line-content">                    map.addImage('bus-icon', image);</td></tr><tr><td class="line-number" value="277"></td><td class="line-content">                    resolve();</td></tr><tr><td class="line-number" value="278"></td><td class="line-content">                });</td></tr><tr><td class="line-number" value="279"></td><td class="line-content">            }),</td></tr><tr><td class="line-number" value="280"></td><td class="line-content">            new Promise((resolve, reject) =&gt; {</td></tr><tr><td class="line-number" value="281"></td><td class="line-content">                map.loadImage(imageArrows, (error, image) =&gt; {</td></tr><tr><td class="line-number" value="282"></td><td class="line-content">                    if (error) reject(error);</td></tr><tr><td class="line-number" value="283"></td><td class="line-content">                    map.addImage('arrow-icon', image);</td></tr><tr><td class="line-number" value="284"></td><td class="line-content">                    resolve();</td></tr><tr><td class="line-number" value="285"></td><td class="line-content">                });</td></tr><tr><td class="line-number" value="286"></td><td class="line-content">            })</td></tr><tr><td class="line-number" value="287"></td><td class="line-content">        ]).then(() =&gt; {</td></tr><tr><td class="line-number" value="288"></td><td class="line-content">            // Add the route source</td></tr><tr><td class="line-number" value="289"></td><td class="line-content">            map.addSource('route', {</td></tr><tr><td class="line-number" value="290"></td><td class="line-content">                'type': 'geojson',</td></tr><tr><td class="line-number" value="291"></td><td class="line-content">                'data': geojson</td></tr><tr><td class="line-number" value="292"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="293"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="294"></td><td class="line-content">            // Add the bus stops source</td></tr><tr><td class="line-number" value="295"></td><td class="line-content">            map.addSource('bus-stops', {</td></tr><tr><td class="line-number" value="296"></td><td class="line-content">                'type': 'geojson',</td></tr><tr><td class="line-number" value="297"></td><td class="line-content">                'data': poisGeoJSON</td></tr><tr><td class="line-number" value="298"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="299"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="300"></td><td class="line-content">            // Add the bus source</td></tr><tr><td class="line-number" value="301"></td><td class="line-content">            map.addSource('bus', {</td></tr><tr><td class="line-number" value="302"></td><td class="line-content">                'type': 'geojson',</td></tr><tr><td class="line-number" value="303"></td><td class="line-content">                'data': busGeoJSON</td></tr><tr><td class="line-number" value="304"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="305"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="306"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="307"></td><td class="line-content">            // Add the arrow layer</td></tr><tr><td class="line-number" value="308"></td><td class="line-content">            map.addLayer({</td></tr><tr><td class="line-number" value="309"></td><td class="line-content">                'id': 'route-arrows',</td></tr><tr><td class="line-number" value="310"></td><td class="line-content">                'type': 'symbol',</td></tr><tr><td class="line-number" value="311"></td><td class="line-content">                'source': 'route',</td></tr><tr><td class="line-number" value="312"></td><td class="line-content">                'layout': {</td></tr><tr><td class="line-number" value="313"></td><td class="line-content">                    'symbol-placement': 'line',</td></tr><tr><td class="line-number" value="314"></td><td class="line-content">                    'symbol-spacing': 25,</td></tr><tr><td class="line-number" value="315"></td><td class="line-content">                    'icon-image': 'arrow-icon',</td></tr><tr><td class="line-number" value="316"></td><td class="line-content">                    'icon-size': 0.3,</td></tr><tr><td class="line-number" value="317"></td><td class="line-content">                    'icon-allow-overlap': true,</td></tr><tr><td class="line-number" value="318"></td><td class="line-content">                    'icon-ignore-placement': true,</td></tr><tr><td class="line-number" value="319"></td><td class="line-content">                    'icon-rotation-alignment': 'map',</td></tr><tr><td class="line-number" value="320"></td><td class="line-content">                    'icon-pitch-alignment': 'map'</td></tr><tr><td class="line-number" value="321"></td><td class="line-content">                }</td></tr><tr><td class="line-number" value="322"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="323"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="324"></td><td class="line-content">            // Add the route layer</td></tr><tr><td class="line-number" value="325"></td><td class="line-content">            map.addLayer({</td></tr><tr><td class="line-number" value="326"></td><td class="line-content">                'id': 'route',</td></tr><tr><td class="line-number" value="327"></td><td class="line-content">                'type': 'line',</td></tr><tr><td class="line-number" value="328"></td><td class="line-content">                'source': 'route',</td></tr><tr><td class="line-number" value="329"></td><td class="line-content">                'layout': {</td></tr><tr><td class="line-number" value="330"></td><td class="line-content">                    'line-join': 'round',</td></tr><tr><td class="line-number" value="331"></td><td class="line-content">                    'line-cap': 'round'</td></tr><tr><td class="line-number" value="332"></td><td class="line-content">                },</td></tr><tr><td class="line-number" value="333"></td><td class="line-content">                'paint': {</td></tr><tr><td class="line-number" value="334"></td><td class="line-content">                    'line-color': '#ff0000',</td></tr><tr><td class="line-number" value="335"></td><td class="line-content">                    'line-width': 3</td></tr><tr><td class="line-number" value="336"></td><td class="line-content">                }</td></tr><tr><td class="line-number" value="337"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="338"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="339"></td><td class="line-content">            // Add the bus stops layer</td></tr><tr><td class="line-number" value="340"></td><td class="line-content">            map.addLayer({</td></tr><tr><td class="line-number" value="341"></td><td class="line-content">                'id': 'bus-stops',</td></tr><tr><td class="line-number" value="342"></td><td class="line-content">                'type': 'symbol',</td></tr><tr><td class="line-number" value="343"></td><td class="line-content">                'source': 'bus-stops',</td></tr><tr><td class="line-number" value="344"></td><td class="line-content">                'layout': {</td></tr><tr><td class="line-number" value="345"></td><td class="line-content">                    'icon-anchor': 'bottom',</td></tr><tr><td class="line-number" value="346"></td><td class="line-content">                    'icon-image': 'bus-stop-icon',</td></tr><tr><td class="line-number" value="347"></td><td class="line-content">                    'icon-size': [</td></tr><tr><td class="line-number" value="348"></td><td class="line-content">                        'interpolate',</td></tr><tr><td class="line-number" value="349"></td><td class="line-content">                        ['linear'],</td></tr><tr><td class="line-number" value="350"></td><td class="line-content">                        ['zoom'],</td></tr><tr><td class="line-number" value="351"></td><td class="line-content">                        10, 0.45,</td></tr><tr><td class="line-number" value="352"></td><td class="line-content">                        13, 0.55,</td></tr><tr><td class="line-number" value="353"></td><td class="line-content">                        16, 0.65</td></tr><tr><td class="line-number" value="354"></td><td class="line-content">                    ],</td></tr><tr><td class="line-number" value="355"></td><td class="line-content">                    'icon-allow-overlap': true,</td></tr><tr><td class="line-number" value="356"></td><td class="line-content">                    'text-field': ['get', 'name'],</td></tr><tr><td class="line-number" value="357"></td><td class="line-content">                    'text-size': 11.5,</td></tr><tr><td class="line-number" value="358"></td><td class="line-content">                    'text-offset': [0, -1.8],</td></tr><tr><td class="line-number" value="359"></td><td class="line-content">                    'text-anchor': 'bottom',</td></tr><tr><td class="line-number" value="360"></td><td class="line-content">                    'text-optional': true,</td></tr><tr><td class="line-number" value="361"></td><td class="line-content">                    'text-font': ['Arial Unicode MS Bold'],</td></tr><tr><td class="line-number" value="362"></td><td class="line-content">                },</td></tr><tr><td class="line-number" value="363"></td><td class="line-content">                'paint': {</td></tr><tr><td class="line-number" value="364"></td><td class="line-content">                    'text-halo-color': '#ffffff',</td></tr><tr><td class="line-number" value="365"></td><td class="line-content">                    'text-halo-width': 1,</td></tr><tr><td class="line-number" value="366"></td><td class="line-content">                    'text-color': '#6884D9',</td></tr><tr><td class="line-number" value="367"></td><td class="line-content">                }</td></tr><tr><td class="line-number" value="368"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="369"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="370"></td><td class="line-content">            // Add the bus layer</td></tr><tr><td class="line-number" value="371"></td><td class="line-content">            map.addLayer({</td></tr><tr><td class="line-number" value="372"></td><td class="line-content">                'id': 'bus',</td></tr><tr><td class="line-number" value="373"></td><td class="line-content">                'type': 'symbol',</td></tr><tr><td class="line-number" value="374"></td><td class="line-content">                'source': 'bus',</td></tr><tr><td class="line-number" value="375"></td><td class="line-content">                'layout': {</td></tr><tr><td class="line-number" value="376"></td><td class="line-content">                    'icon-anchor': 'bottom',</td></tr><tr><td class="line-number" value="377"></td><td class="line-content">                    'icon-image': 'bus-icon',</td></tr><tr><td class="line-number" value="378"></td><td class="line-content">                    'icon-size': [</td></tr><tr><td class="line-number" value="379"></td><td class="line-content">                        'interpolate',</td></tr><tr><td class="line-number" value="380"></td><td class="line-content">                        ['linear'],</td></tr><tr><td class="line-number" value="381"></td><td class="line-content">                        ['zoom'],</td></tr><tr><td class="line-number" value="382"></td><td class="line-content">                        10, 0.65,</td></tr><tr><td class="line-number" value="383"></td><td class="line-content">                        13, 0.75,</td></tr><tr><td class="line-number" value="384"></td><td class="line-content">                        16, 0.85</td></tr><tr><td class="line-number" value="385"></td><td class="line-content">                    ],</td></tr><tr><td class="line-number" value="386"></td><td class="line-content">                    'icon-allow-overlap': true,</td></tr><tr><td class="line-number" value="387"></td><td class="line-content">                    'text-field': ['get', 'busId'],</td></tr><tr><td class="line-number" value="388"></td><td class="line-content">                    'text-size': 12,</td></tr><tr><td class="line-number" value="389"></td><td class="line-content">                    'text-offset': [0, -2.1],</td></tr><tr><td class="line-number" value="390"></td><td class="line-content">                    'text-anchor': 'bottom',</td></tr><tr><td class="line-number" value="391"></td><td class="line-content">                    'text-optional': true,</td></tr><tr><td class="line-number" value="392"></td><td class="line-content">                    'text-font': ['Arial Unicode MS Bold']</td></tr><tr><td class="line-number" value="393"></td><td class="line-content">                },</td></tr><tr><td class="line-number" value="394"></td><td class="line-content">                'paint': {</td></tr><tr><td class="line-number" value="395"></td><td class="line-content">                    'text-halo-color': '#ffffff',</td></tr><tr><td class="line-number" value="396"></td><td class="line-content">                    'text-halo-width': 1,</td></tr><tr><td class="line-number" value="397"></td><td class="line-content">                    'text-color': '#ff3c00'</td></tr><tr><td class="line-number" value="398"></td><td class="line-content">                }</td></tr><tr><td class="line-number" value="399"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="400"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="401"></td><td class="line-content">            // Add popup on click for buses</td></tr><tr><td class="line-number" value="402"></td><td class="line-content">            map.on('click', 'bus', (e) =&gt; {</td></tr><tr><td class="line-number" value="403"></td><td class="line-content">                const coordinates = e.features[0].geometry.coordinates.slice();</td></tr><tr><td class="line-number" value="404"></td><td class="line-content">                const busId = e.features[0].properties.busId;</td></tr><tr><td class="line-number" value="405"></td><td class="line-content">                const lastUpdate = new Date(e.features[0].properties.lastUpdate).toLocaleString();</td></tr><tr><td class="line-number" value="406"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="407"></td><td class="line-content">                new mapboxgl.Popup({</td></tr><tr><td class="line-number" value="408"></td><td class="line-content">                    anchor: 'bottom',</td></tr><tr><td class="line-number" value="409"></td><td class="line-content">                    offset: [0, -40]</td></tr><tr><td class="line-number" value="410"></td><td class="line-content">                })</td></tr><tr><td class="line-number" value="411"></td><td class="line-content">                    .setLngLat(coordinates)</td></tr><tr><td class="line-number" value="412"></td><td class="line-content">                    .setHTML(`</td></tr><tr><td class="line-number" value="413"></td><td class="line-content">                        &lt;p class="bus-stop-name"&gt;Bus ${busId}&lt;/p&gt;</td></tr><tr><td class="line-number" value="414"></td><td class="line-content">                        &lt;p style="margin: 5px 0 0 0; font-size: 12px;"&gt;Update: ${lastUpdate}&lt;/p&gt;</td></tr><tr><td class="line-number" value="415"></td><td class="line-content">                    `)</td></tr><tr><td class="line-number" value="416"></td><td class="line-content">                    .addTo(map);</td></tr><tr><td class="line-number" value="417"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="418"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="419"></td><td class="line-content">            // Change cursor on hover for buses</td></tr><tr><td class="line-number" value="420"></td><td class="line-content">            map.on('mouseenter', 'bus', () =&gt; {</td></tr><tr><td class="line-number" value="421"></td><td class="line-content">                map.getCanvas().style.cursor = 'pointer';</td></tr><tr><td class="line-number" value="422"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="423"></td><td class="line-content">            map.on('mouseleave', 'bus', () =&gt; {</td></tr><tr><td class="line-number" value="424"></td><td class="line-content">                map.getCanvas().style.cursor = '';</td></tr><tr><td class="line-number" value="425"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="426"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="427"></td><td class="line-content">            // Add popup on click for bus stops</td></tr><tr><td class="line-number" value="428"></td><td class="line-content">            map.on('click', 'bus-stops', (e) =&gt; {</td></tr><tr><td class="line-number" value="429"></td><td class="line-content">                const coordinates = e.features[0].geometry.coordinates.slice();</td></tr><tr><td class="line-number" value="430"></td><td class="line-content">                const name = e.features[0].properties.name;</td></tr><tr><td class="line-number" value="431"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="432"></td><td class="line-content">                new mapboxgl.Popup()</td></tr><tr><td class="line-number" value="433"></td><td class="line-content">                    .setLngLat(coordinates)</td></tr><tr><td class="line-number" value="434"></td><td class="line-content">                    .setHTML(`&lt;p class="bus-stop-name"&gt;${name}&lt;/p&gt;`)</td></tr><tr><td class="line-number" value="435"></td><td class="line-content">                    .addTo(map);</td></tr><tr><td class="line-number" value="436"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="437"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="438"></td><td class="line-content">            // Change cursor on hover for bus stops</td></tr><tr><td class="line-number" value="439"></td><td class="line-content">            map.on('mouseenter', 'bus-stops', () =&gt; {</td></tr><tr><td class="line-number" value="440"></td><td class="line-content">                map.getCanvas().style.cursor = 'pointer';</td></tr><tr><td class="line-number" value="441"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="442"></td><td class="line-content">            map.on('mouseleave', 'bus-stops', () =&gt; {</td></tr><tr><td class="line-number" value="443"></td><td class="line-content">                map.getCanvas().style.cursor = '';</td></tr><tr><td class="line-number" value="444"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="445"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="446"></td><td class="line-content">            // Get the bounds of all features</td></tr><tr><td class="line-number" value="447"></td><td class="line-content">            const coordinates = geojson.features[0].geometry.coordinates;</td></tr><tr><td class="line-number" value="448"></td><td class="line-content">            const bounds = coordinates.reduce((bounds, coord) =&gt; {</td></tr><tr><td class="line-number" value="449"></td><td class="line-content">                return bounds.extend(coord);</td></tr><tr><td class="line-number" value="450"></td><td class="line-content">            }, new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));</td></tr><tr><td class="line-number" value="451"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="452"></td><td class="line-content">            // Extend bounds to include POIs</td></tr><tr><td class="line-number" value="453"></td><td class="line-content">            pois.forEach(poi =&gt; {</td></tr><tr><td class="line-number" value="454"></td><td class="line-content">                bounds.extend([parseFloat(poi.lng), parseFloat(poi.lat)]);</td></tr><tr><td class="line-number" value="455"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="456"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="457"></td><td class="line-content">            // Fit the map to the route with padding</td></tr><tr><td class="line-number" value="458"></td><td class="line-content">            map.fitBounds(bounds, {</td></tr><tr><td class="line-number" value="459"></td><td class="line-content">                padding: 50,</td></tr><tr><td class="line-number" value="460"></td><td class="line-content">                duration: 1000</td></tr><tr><td class="line-number" value="461"></td><td class="line-content">            });</td></tr><tr><td class="line-number" value="462"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="463"></td><td class="line-content">        }).catch(error =&gt; console.error('Error loading images:', error));</td></tr><tr><td class="line-number" value="464"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="465"></td><td class="line-content">        updateBusLocation();</td></tr><tr><td class="line-number" value="466"></td><td class="line-content">    });</td></tr><tr><td class="line-number" value="467"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="468"></td><td class="line-content">    // Function to fetch and update bus location</td></tr><tr><td class="line-number" value="469"></td><td class="line-content">    function updateBusLocation() {</td></tr><tr><td class="line-number" value="470"></td><td class="line-content">        $.ajax({</td></tr><tr><td class="line-number" value="471"></td><td class="line-content">            url: `https://live.paj.com.my/get/TK002`,</td></tr><tr><td class="line-number" value="472"></td><td class="line-content">            method: 'get',</td></tr><tr><td class="line-number" value="473"></td><td class="line-content">            cache: false,</td></tr><tr><td class="line-number" value="474"></td><td class="line-content">            dataType: "json",</td></tr><tr><td class="line-number" value="475"></td><td class="line-content">            success: function(result) {</td></tr><tr><td class="line-number" value="476"></td><td class="line-content">                if (result.success) {</td></tr><tr><td class="line-number" value="477"></td><td class="line-content">                    let arrayData = Object.values(result.data);</td></tr><tr><td class="line-number" value="478"></td><td class="line-content">                    // Update bus positions in GeoJSON</td></tr><tr><td class="line-number" value="479"></td><td class="line-content">                    const newBusGeoJSON = {</td></tr><tr><td class="line-number" value="480"></td><td class="line-content">                        type: 'FeatureCollection',</td></tr><tr><td class="line-number" value="481"></td><td class="line-content">                        features: arrayData.map(bus =&gt; ({</td></tr><tr><td class="line-number" value="482"></td><td class="line-content">                            type: 'Feature',</td></tr><tr><td class="line-number" value="483"></td><td class="line-content">                            geometry: {</td></tr><tr><td class="line-number" value="484"></td><td class="line-content">                                type: 'Point',</td></tr><tr><td class="line-number" value="485"></td><td class="line-content">                                coordinates: [bus.lng, bus.lat]</td></tr><tr><td class="line-number" value="486"></td><td class="line-content">                            },</td></tr><tr><td class="line-number" value="487"></td><td class="line-content">                            properties: {</td></tr><tr><td class="line-number" value="488"></td><td class="line-content">                                busId: bus.bus,</td></tr><tr><td class="line-number" value="489"></td><td class="line-content">                                title: `Bus ${bus.bus}`,</td></tr><tr><td class="line-number" value="490"></td><td class="line-content">                                lastUpdate: bus.time</td></tr><tr><td class="line-number" value="491"></td><td class="line-content">                            }</td></tr><tr><td class="line-number" value="492"></td><td class="line-content">                        }))</td></tr><tr><td class="line-number" value="493"></td><td class="line-content">                    };</td></tr><tr><td class="line-number" value="494"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="495"></td><td class="line-content">                    try {</td></tr><tr><td class="line-number" value="496"></td><td class="line-content">                        map.getSource('bus').setData(newBusGeoJSON);</td></tr><tr><td class="line-number" value="497"></td><td class="line-content">                        // Update the sliding cards</td></tr><tr><td class="line-number" value="498"></td><td class="line-content">                        updateBusCards(arrayData);</td></tr><tr><td class="line-number" value="499"></td><td class="line-content">                    } catch (e) {</td></tr><tr><td class="line-number" value="500"></td><td class="line-content">                        // console.error('Error updating map:', e);</td></tr><tr><td class="line-number" value="501"></td><td class="line-content">                    }</td></tr><tr><td class="line-number" value="502"></td><td class="line-content">                } else {</td></tr><tr><td class="line-number" value="503"></td><td class="line-content">                    // console.log('Error:', result.message);</td></tr><tr><td class="line-number" value="504"></td><td class="line-content">                }</td></tr><tr><td class="line-number" value="505"></td><td class="line-content">            }</td></tr><tr><td class="line-number" value="506"></td><td class="line-content">        });</td></tr><tr><td class="line-number" value="507"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="508"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="509"></td><td class="line-content">    // Function to update bus cards</td></tr><tr><td class="line-number" value="510"></td><td class="line-content">    function updateBusCards(busData) {</td></tr><tr><td class="line-number" value="511"></td><td class="line-content">        const busCardsContainer = document.getElementById('busCards');</td></tr><tr><td class="line-number" value="512"></td><td class="line-content">        busCardsContainer.innerHTML = ''; // Clear existing cards</td></tr><tr><td class="line-number" value="513"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="514"></td><td class="line-content">        if (busData.length &lt; 3) {</td></tr><tr><td class="line-number" value="515"></td><td class="line-content">            // Center the container for a single bus</td></tr><tr><td class="line-number" value="516"></td><td class="line-content">            busCardsContainer.style.display = 'flex';</td></tr><tr><td class="line-number" value="517"></td><td class="line-content">            busCardsContainer.style.justifyContent = 'center';</td></tr><tr><td class="line-number" value="518"></td><td class="line-content">        } else {</td></tr><tr><td class="line-number" value="519"></td><td class="line-content">            // Restore default styles for multiple buses</td></tr><tr><td class="line-number" value="520"></td><td class="line-content">            busCardsContainer.style.display = 'block';</td></tr><tr><td class="line-number" value="521"></td><td class="line-content">            busCardsContainer.style.justifyContent = ''; // Clear the justifyContent</td></tr><tr><td class="line-number" value="522"></td><td class="line-content">        }</td></tr><tr><td class="line-number" value="523"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="524"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="525"></td><td class="line-content">        busData.forEach(bus =&gt; {</td></tr><tr><td class="line-number" value="526"></td><td class="line-content">            const card = document.createElement('div');</td></tr><tr><td class="line-number" value="527"></td><td class="line-content">            card.className = 'bus-card';</td></tr><tr><td class="line-number" value="528"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="529"></td><td class="line-content">            // Check if the last update is within the last 30 minutes</td></tr><tr><td class="line-number" value="530"></td><td class="line-content">            const lastUpdateTime = new Date(bus.time);</td></tr><tr><td class="line-number" value="531"></td><td class="line-content">            // const timeDifferenceInMinutes = (currentTime - lastUpdateTime) / (1000 * 60);</td></tr><tr><td class="line-number" value="532"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="533"></td><td class="line-content">            // if (timeDifferenceInMinutes &lt;= 30) {</td></tr><tr><td class="line-number" value="534"></td><td class="line-content">            //     card.style.background = 'rgb(20,192,80)'; // Light green background</td></tr><tr><td class="line-number" value="535"></td><td class="line-content">            // }</td></tr><tr><td class="line-number" value="536"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="537"></td><td class="line-content">            card.onclick = () =&gt; {</td></tr><tr><td class="line-number" value="538"></td><td class="line-content">                // Remove active class from all cards</td></tr><tr><td class="line-number" value="539"></td><td class="line-content">                document.querySelectorAll('.bus-card').forEach(c =&gt; c.classList.remove('active'));</td></tr><tr><td class="line-number" value="540"></td><td class="line-content">                // Add active class to clicked card</td></tr><tr><td class="line-number" value="541"></td><td class="line-content">                card.classList.add('active');</td></tr><tr><td class="line-number" value="542"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="543"></td><td class="line-content">                // Fly to bus location</td></tr><tr><td class="line-number" value="544"></td><td class="line-content">                map.flyTo({</td></tr><tr><td class="line-number" value="545"></td><td class="line-content">                    center: [bus.lng, bus.lat],</td></tr><tr><td class="line-number" value="546"></td><td class="line-content">                    zoom: 15,</td></tr><tr><td class="line-number" value="547"></td><td class="line-content">                    duration: 1000</td></tr><tr><td class="line-number" value="548"></td><td class="line-content">                });</td></tr><tr><td class="line-number" value="549"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="550"></td><td class="line-content">                // Show popup for the bus</td></tr><tr><td class="line-number" value="551"></td><td class="line-content">                new mapboxgl.Popup({</td></tr><tr><td class="line-number" value="552"></td><td class="line-content">                    anchor: 'bottom',</td></tr><tr><td class="line-number" value="553"></td><td class="line-content">                    offset: [0, -40]</td></tr><tr><td class="line-number" value="554"></td><td class="line-content">                })</td></tr><tr><td class="line-number" value="555"></td><td class="line-content">                    .setLngLat([bus.lng, bus.lat])</td></tr><tr><td class="line-number" value="556"></td><td class="line-content">                    .setHTML(`</td></tr><tr><td class="line-number" value="557"></td><td class="line-content">                    &lt;p class="bus-stop-name"&gt;Bus ${bus.bus}&lt;/p&gt;</td></tr><tr><td class="line-number" value="558"></td><td class="line-content">                    &lt;p style="margin: 0 0 0 0; font-size: 12px;"&gt;Update: ${lastUpdateTime.toLocaleString()}&lt;/p&gt;</td></tr><tr><td class="line-number" value="559"></td><td class="line-content">                `)</td></tr><tr><td class="line-number" value="560"></td><td class="line-content">                    .addTo(map);</td></tr><tr><td class="line-number" value="561"></td><td class="line-content">            };</td></tr><tr><td class="line-number" value="562"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="563"></td><td class="line-content">            let time = new Date(bus.time);</td></tr><tr><td class="line-number" value="564"></td><td class="line-content">            let now = new Date();</td></tr><tr><td class="line-number" value="565"></td><td class="line-content">            let timeDifference = (now - time) / (1000 * 60); // Difference in minutes</td></tr><tr><td class="line-number" value="566"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="567"></td><td class="line-content">            let onlineStat = '';</td></tr><tr><td class="line-number" value="568"></td><td class="line-content">            // Apply green background if less than 30 minutes</td></tr><tr><td class="line-number" value="569"></td><td class="line-content">            if (timeDifference &lt; 30) {</td></tr><tr><td class="line-number" value="570"></td><td class="line-content">                // add a class to the card</td></tr><tr><td class="line-number" value="571"></td><td class="line-content">                onlineStat = `&lt;i class="fa-solid fa-signal-stream mt-1 fs-2 online" style="color: #0fa354 !important;"&gt;&lt;/i&gt;`;</td></tr><tr><td class="line-number" value="572"></td><td class="line-content">                card.classList.add('online');</td></tr><tr><td class="line-number" value="573"></td><td class="line-content">                card.classList.remove('offline');</td></tr><tr><td class="line-number" value="574"></td><td class="line-content">            }</td></tr><tr><td class="line-number" value="575"></td><td class="line-content">            else {</td></tr><tr><td class="line-number" value="576"></td><td class="line-content">                // remove the class</td></tr><tr><td class="line-number" value="577"></td><td class="line-content">                onlineStat = `&lt;i class="fa-solid fa-signal-stream-slash mt-1 fs-2 offline" style="color: #ff274f !important;"&gt;&lt;/i&gt;`;</td></tr><tr><td class="line-number" value="578"></td><td class="line-content">                card.classList.remove('online');</td></tr><tr><td class="line-number" value="579"></td><td class="line-content">                card.classList.add('offline');</td></tr><tr><td class="line-number" value="580"></td><td class="line-content">            }</td></tr><tr><td class="line-number" value="581"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="582"></td><td class="line-content">            // Format time as dd/mm/yyyy hh:mm:ss AM/PM</td></tr><tr><td class="line-number" value="583"></td><td class="line-content">            let timeString = time.toLocaleString('en-GB', {hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true});</td></tr><tr><td class="line-number" value="584"></td><td class="line-content">            card.innerHTML = `</td></tr><tr><td class="line-number" value="585"></td><td class="line-content">                &lt;div class="d-flex justify-content-between"&gt;</td></tr><tr><td class="line-number" value="586"></td><td class="line-content">                    &lt;div class="d-flex"&gt;</td></tr><tr><td class="line-number" value="587"></td><td class="line-content">                        &lt;div class="legend-icon me-1" style="background-image: url(https://live.paj.com.my/assets/bus-marker.png)"&gt;&lt;/div&gt;</td></tr><tr><td class="line-number" value="588"></td><td class="line-content">                        &lt;p class="bus-id mb-0 fs-4 fw-bold"&gt;${bus.bus}&lt;/p&gt;</td></tr><tr><td class="line-number" value="589"></td><td class="line-content">                    &lt;/div&gt;</td></tr><tr><td class="line-number" value="590"></td><td class="line-content">                    ${onlineStat}</td></tr><tr><td class="line-number" value="591"></td><td class="line-content">                &lt;/div&gt;</td></tr><tr><td class="line-number" value="592"></td><td class="line-content">                &lt;p class="last-update fs-7 fw-bold"&gt;&lt;i class="fa-solid fa-clock ms-1 me-2 text-primary"&gt;&lt;/i&gt;${timeString.toUpperCase()}&lt;/p&gt;</td></tr><tr><td class="line-number" value="593"></td><td class="line-content">            `;</td></tr><tr><td class="line-number" value="594"></td><td class="line-content">            busCardsContainer.appendChild(card);</td></tr><tr><td class="line-number" value="595"></td><td class="line-content">        });</td></tr><tr><td class="line-number" value="596"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="597"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="598"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="599"></td><td class="line-content">    // interval to update bus location</td></tr><tr><td class="line-number" value="600"></td><td class="line-content">    setInterval(updateBusLocation, 10000);</td></tr><tr><td class="line-number" value="601"></td><td class="line-content"><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="602"></td><td class="line-content"><span class="html-tag">&lt;/body&gt;</span></td></tr><tr><td class="line-number" value="603"></td><td class="line-content"><span class="html-tag">&lt;/html&gt;</span></td></tr><tr><td class="line-number" value="604"></td><td class="line-content"><span class="html-end-of-file"></span></td></tr></tbody></table></body></html>